<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>CinePrompt Master</title>
    <!-- iOS App 支援標籤 -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="CinePrompt">
    
    <!-- React & Tailwind CDN -->
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Lucide Vanilla Script (穩定版圖示系統) -->
    <script src="https://unpkg.com/lucide@latest"></script>
    
    <style>
        body { background-color: #070708; color: #e4e4e7; -webkit-tap-highlight-color: transparent; }
        .custom-scrollbar::-webkit-scrollbar { width: 4px; }
        .custom-scrollbar::-webkit-scrollbar-track { background: transparent; }
        .custom-scrollbar::-webkit-scrollbar-thumb { background: #27272a; border-radius: 20px; }
        .custom-scrollbar::-webkit-scrollbar-thumb:hover { background: #3f3f46; }
        select { -webkit-appearance: none; appearance: none; background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 24 24' stroke='%23666'%3E%3Cpath stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M19 9l-7 7-7-7'%3E%3C/path%3E%3C/svg%3E"); background-repeat: no-repeat; background-position: right 0.5rem center; background-size: 1rem; }
        @media (max-width: 640px) { select, textarea, button { font-size: 16px !important; } }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useMemo, useEffect } = React;

        const Icon = ({ name, size = 16, className = "" }) => {
            useEffect(() => {
                if (window.lucide) { window.lucide.createIcons(); }
            }, [name]);
            return <i data-lucide={name.toLowerCase()} style={{ width: size, height: size }} className={`inline-block ${className}`}></i>;
        };

        const App = () => {
            const config = {
                cameras: [
                    // --- 一般商業高品質 ---
                    { id: 'phaseone', name: 'Phase One XF IQ4 ｜ 飛思一億', desc: '商業高品質：極致商業靜物攝影，紋理細節爆棚。', prompt: 'shot on Phase One XF IQ4 150MP, medium format clarity, commercial macro precision' },
                    { id: 'h6d', name: 'Hasselblad H6D-100c ｜ 哈蘇中幅', desc: '商業高品質：色彩深度極高，適合高級產品與人像。', prompt: 'shot on Hasselblad H6D-100c, high color depth, elite commercial aesthetic' },
                    { id: 'gfx100', name: 'Fujifilm GFX 100 II ｜ 富士中幅', desc: '商業高品質：富士獨有色彩模擬，極高寬容度。', prompt: 'shot on Fujifilm GFX 100 II, medium format depth, film simulation colors' },
                    { id: '5d4', name: 'Canon 5D Mark IV ｜ 佳能 5D4', desc: '商業高品質：標準商業數位單眼質感，色彩討喜。', prompt: 'shot on Canon EOS 5D Mark IV, standard DSLR look, vibrant warm tones' },
                    { id: 'venice2', name: 'Sony VENICE 2 ｜ 索尼威尼斯', desc: '商業高品質：色彩還原準確，膚色自然，高感純淨。', prompt: 'shot on Sony VENICE 2, CineAlta color science, natural skin tones, high ISO purity' },
                    { id: 'm11m', name: 'Leica M11 Monochrom ｜ 徠卡黑白', desc: '商業高品質：純粹的黑白灰階，高對比與銳利度。', prompt: 'shot on Leica M11 Monochrom, pure B&W photography, high contrast grayscale' },
                    { id: 'nkonf3', name: 'Nikon F3 ｜ 尼康 F3', desc: '商業高品質：經典新聞攝影質感，樸實剛硬。', prompt: 'shot on Nikon F3, 35mm photojournalism aesthetic, robust analog look' },

                    // --- 電影攝影系統 ---
                    { id: 'arri35', name: 'ARRI Alexa 35 ｜ 阿萊 35', desc: '電影系統：最新 ALEV 4 感光元件，影視工業最高標準。', prompt: 'shot on ARRI Alexa 35, ALEV 4 sensor, cinematic textures, superior color science' },
                    { id: 'arri65', name: 'ARRI Alexa 65 ｜ 阿萊 65', desc: '電影系統：頂級電影感，極致動態範圍。', prompt: 'shot on ARRI Alexa 65, ALEV 3 A3X sensor, legendary cinematic dynamic range' },
                    { id: 'imax70', name: 'IMAX 15/70mm ｜ IMAX 底片', desc: '電影系統：巨大的畫幅，極致解析度與淺景深。', prompt: 'shot on IMAX 15/70mm film, massive 18k resolution, ultra-wide gate' },
                    { id: 'raptor', name: 'RED V-Raptor XL ｜ RED 猛禽', desc: '電影系統：極度銳利、高反差的現代商業質感。', prompt: 'shot on RED V-Raptor XL, 8K VistaVision, sharp modern commercial contrast' },
                    { id: 'dxl2', name: 'Panavision Millennium DXL2 ｜ 帕那維申', desc: '電影系統：好萊塢大片質感，色彩科學獨特。', prompt: 'shot on Panavision Millennium DXL2, 8K Large Format, distinct Panavision color' },
                    { id: 'ursa12k', name: 'Blackmagic URSA 12K ｜ BMD', desc: '電影系統：極致數位細節，色彩科學偏膠片。', prompt: 'shot on Blackmagic URSA Mini Pro 12K, high resolution detail, filmic color' },
                    
                    // --- 創意與特效 ---
                    { id: 'arri16sr', name: 'Arriflex 16SR ｜ 傳奇 16mm', desc: '創意特效：經典紀錄片質感，有機顆粒與懷舊色彩。', prompt: 'shot on Arriflex 16SR 16mm film, organic celluloid grain, nostalgic vintage texture' },
                    { id: 'phantom', name: 'Phantom Flex4K ｜ 慢動作機', desc: '創意特效：觸發「液體凍結」、「慢動作」特效。', prompt: 'shot on Phantom Flex4K, high-speed photography, liquid splash freeze' },
                    { id: 'bolex', name: '16mm Bolex H16 ｜ 16釐米', desc: '創意特效：獨立電影感，邊緣柔和，顆粒明顯。', prompt: 'shot on 16mm Bolex H16, vintage 16mm film grain, soft edges' },
                    { id: 'super8', name: 'Super 8mm Film ｜ 超8底片', desc: '創意特效：家庭錄影帶質感，低畫質懷舊感。', prompt: 'shot on Super 8mm film, nostalgic grainy home video aesthetic' },
                    { id: 'gopro', name: 'GoPro Hero 12 ｜ 運動機', desc: '創意特效：超廣角、魚眼變形、極限視角。', prompt: 'shot on GoPro Hero 12, wide fisheye lens, action camera perspective' },
                    { id: 'mavic3', name: 'DJI Mavic 3 Cine ｜ 航拍機', desc: '創意特效：俯瞰視角，廣闊風景，平穩運鏡。', prompt: 'shot on DJI Mavic 3 Cine, aerial drone perspective, sweeping landscape' },
                    { id: 'sx70', name: 'Polaroid SX-70 ｜ 寶麗來', desc: '創意特效：柔焦、偏色、白色邊框感。', prompt: 'shot on Polaroid SX-70, instant film aesthetic, soft focus, square white border' },
                    { id: 'thermal', name: 'Thermal Camera ｜ 熱成像儀', desc: '創意特效：紅外線熱感視覺，彩虹色譜。', prompt: 'shot on thermal imaging camera, infrared heat signature, rainbow spectrum' },
                    { id: 'nightvision', name: 'Night Vision ｜ 夜視鏡', desc: '創意特效：綠色螢光單色調，充滿噪點。', prompt: 'shot through military night vision goggles, monochromatic green phosphor glow' }
                ],
                lenses: [
                    // --- 一般商業高品質 ---
                    { id: 'otus55', name: 'Zeiss Otus 55mm f/1.4 ｜ 50mm', desc: '商攝高品質：無視像差，極致物理正確。', prompt: 'Zeiss Otus 55mm f/1.4, apochromatic precision, flawless resolution' },
                    { id: 'sigma14', name: 'Sigma 14mm f/1.4 Art ｜ 14mm', desc: '商攝高品質：壯闊星空與建築，極致解析度。', prompt: 'Sigma 14mm f/1.4 DG DN Art lens, wide perspective, high corner-to-corner sharpness' },
                    { id: 'canon85L', name: 'Canon EF 85mm f/1.2L ｜ 85mm', desc: '商攝高品質：夢幻奶油散景，眼神光捕捉。', prompt: 'Canon EF 85mm f/1.2L II USM, legendary creamy bokeh, portrait compression' },
                    { id: 'macro100', name: 'Macro 100mm ｜ 100mm', desc: '商攝高品質：極致特寫，顯微紋理。', prompt: '100mm macro lens, surface details' },
                    { id: 'zeiss35', name: 'Zeiss Distagon 35mm ｜ 35mm', desc: '商攝高品質：經典人文視角，色彩油潤立體。', prompt: 'Zeiss Distagon T* 35mm f/1.4, micro-contrast, 3D pop aesthetic' },
                    { id: 'canon1124', name: 'Canon EF 11-24mm f/4L ｜ 12mm', desc: '商攝高品質：全球最廣直線透視，無魚眼畸變。', prompt: 'Canon EF 11-24mm f/4L USM lens, rectilinear ultra-wide perspective, minimal distortion' },
                    { id: 'nikon1424', name: 'Nikkor 14-24mm f/2.8G ｜ 14mm', desc: '商攝高品質：風景攝影傳奇，壯闊空間感。', prompt: 'Nikkor 14-24mm f/2.8G ED lens, expansive wide-angle field of view, superior contrast' },
                    { id: 'nikkor24', name: 'Nikkor 24mm f/1.4G ｜ 24mm', desc: '商攝高品質：極致解像與邊緣畫質。', prompt: 'Nikkor 24mm f/1.4G ED lens, sharp wide angle, professional optics' },
                    { id: 'canon70200', name: 'Canon EF 70-200mm f/2.8L ｜ 200mm', desc: '商攝高品質：背景強烈貼近，細膩的分離感。', prompt: 'Canon EF 70-200mm f/2.8L IS III USM, professional telephoto compression' },
                    { id: 'canon600', name: 'Canon EF 600mm f/4L ｜ 600mm', desc: '商攝高品質：野生動物與競技捕捉首選。', prompt: 'Canon EF 600mm f/4L IS III USM, extreme telephoto range, ultra-sharp isolation' },

                    // --- 電影鏡 ---
                    { id: 'arrisig', name: 'ARRI Signature Prime ｜ 47mm', desc: '電影鏡：自然膚色之巔，極致柔美散景。', prompt: 'ARRI Signature Prime lens, LPL mount, naturalistic rendering, creamy texture' },
                    { id: 'xtal', name: 'JDC Xtal Xpress ｜ 50mm Anamorphic', desc: '電影鏡：傳奇變形鏡，獨特耀光與電影味。', prompt: 'JDC Xtal Xpress Anamorphic lens, Joe Dunton vintage glass, legendary anamorphic flare' },
                    { id: 'hawkvlite', name: 'Hawk V-Lite ｜ 55mm Anamorphic', desc: '電影鏡：緊湊型現代變形鏡標竿。', prompt: 'Hawk V-Lite Anamorphic lens, modern cinematic anamorphic look' },
                    { id: 'cooke', name: 'Cooke S4/i Prime ｜ 35mm', desc: '電影鏡：膚色溫潤，焦外柔和，經典庫克感。', prompt: 'Cooke S4/i Prime lens, warm "Cooke Look", organic highlights' },
                    { id: 'panamorph', name: 'Panavision Anamorphic ｜ 40mm', desc: '電影鏡：藍色耀光，橢圓散景，寬螢幕。', prompt: 'Panavision C-Series Anamorphic lens, horizontal blue flares, oval bokeh' },
                    { id: 'leicalux', name: 'Leica Summilux-C ｜ 35mm', desc: '電影鏡：高微反差，銳利通透，頂級光學。', prompt: 'Leica Summilux-C, high micro-contrast, optical clarity' },
                    { id: 'zeisssup', name: 'Zeiss Supreme Prime ｜ 50mm', desc: '電影鏡：現代乾淨，科技感強。', prompt: 'Zeiss Supreme Prime, clean modern rendering' },
                    { id: 'k35', name: 'Canon K-35 Vintage ｜ 35mm', desc: '電影鏡：暖調低反差，經典復古光暈。', prompt: 'vintage Canon K-35 prime, nostalgic warm bloom' },
                    { id: 'angenieux', name: 'Angénieux Optimo ｜ 24-290mm', desc: '電影鏡：滑順變焦，工業級高品質質感。', prompt: 'Angénieux Optimo zoom, creamy cinema texture' },

                    // --- 特殊鏡頭 ---
                    { id: 'nikon1700', name: 'Nikkor 1200-1700mm ｜ 1800mm', desc: '特殊鏡頭：極端望遠變焦，遠距離王者。', prompt: 'Nikkor 1200-1700mm f/5.6-8.0P ED IF lens, super telephoto zoom, extreme spatial flattening' },
                    { id: 'canon800', name: 'Canon EF 800mm f/5.6L ｜ 800mm', desc: '特殊鏡頭：長焦之巔，極致背景分離。', prompt: 'Canon EF 800mm f/5.6L IS USM, maximum telephoto reach, ultra-sharp subject isolation' },
                    { id: 'canon1200', name: 'Canon EF 1200mm f/5.6L ｜ 1200mm', desc: '特殊鏡頭：衛星級空間感，極端壓縮。', prompt: 'Canon EF 1200mm f/5.6L USM, extreme telephoto compression, super distance' },
                    { id: 'canon5200', name: 'Canon 5200mm Mirror ｜ 5200mm', desc: '特殊鏡頭：地球極限望遠能力。', prompt: 'Canon 5200mm f/14 mirror lens, world largest prime, astronomical scale' },
                    { id: 'nikkor6mm', name: 'Nikkor 6mm f/2.8 Fisheye ｜ 6mm', desc: '特殊鏡頭：220度全球最廣角魚眼。', prompt: 'Nikkor 6mm f/2.8 fisheye lens, extreme 220-degree circular distortion' },
                    { id: 'nikkor8mm', name: 'Nikkor 8mm f/2.8 ｜ 8mm', desc: '特殊鏡頭：標準魚眼，強烈視覺衝擊。', prompt: 'Nikkor 8mm f/2.8 fisheye lens, 180-degree circular perspective' },
                    { id: 'helios', name: 'Helios 44-2 ｜ 58mm', desc: '特殊鏡頭：傳奇八羽怪，旋轉散景效果。', prompt: 'Helios 44-2 lens, extreme swirly radial bokeh' },
                    { id: 'probe', name: 'Laowa 24mm Probe ｜ 24mm Macro', desc: '特殊鏡頭：蟲視角微距，穿越極限。', prompt: 'Laowa 24mm Probe lens, bug-eye perspective' },
                    { id: 'tiltshift', name: 'Tilt-Shift Lens ｜ 移軸', desc: '特殊鏡頭：微縮效果，修正透視。', prompt: 'tilt-shift lens effect, miniature model aesthetic' },
                    { id: 'split', name: 'Split Diopter ｜ 雙焦鏡', desc: '特殊鏡頭：前後景同時清晰，超現實感。', prompt: 'split diopter shot, dual focus planes' },
                    { id: 'petzval', name: 'Petzval Art Lens ｜ 藝術鏡', desc: '特殊鏡頭：旋轉焦外，藝術美學。', prompt: 'Petzval art lens, swirly bokeh' },
                    { id: 'fisheye', name: 'Fisheye Lens ｜ 廣域魚眼', desc: '特殊鏡頭：180度畸變，主體突出。', prompt: 'extreme fisheye distortion' },
                    { id: 'noct095', name: 'Noctilux f/0.95 ｜ 夜神', desc: '特殊鏡頭：極薄深焦，夢幻氛圍。', prompt: 'Noctilux f/0.95 lens, paper-thin DoF' },
                    { id: 'promist', name: 'Pro-Mist Filter ｜ 柔光', desc: '特殊鏡頭：降低銳利度，夢幻感。', prompt: '1/4 black pro-mist filter, highlight bloom' },
                    { id: 'lensbaby', name: 'Lensbaby Composer ｜ 創意鏡', desc: '特殊鏡頭：手動焦點，周圍拉伸模糊。', prompt: 'Lensbaby Composer, selective focus' }
                ],
                lighting: [
                    // --- 商業打光 ---
                    { id: 'threepoint', name: 'Three-Point Lighting ｜ 三點照明', desc: '商業打光：標準商攝架構，建立立體感。', prompt: 'professional three-point lighting (key, fill, back)' },
                    { id: 'highkey', name: 'High-Key ｜ 高明調', desc: '商業打光：明亮少影，高端美妝風格。', prompt: 'high-key lighting, bright airy aesthetic, minimal shadows' },
                    { id: 'softbox', name: 'Softbox Lighting ｜ 柔光箱', desc: '商業打光：均勻漫射，商攝標準柔光。', prompt: 'softbox diffused lighting, smooth gradients' },
                    { id: 'specular', name: 'Specular ｜ 鏡面高光', desc: '商業打光：定義金屬與精密物件質感。', prompt: 'intense specular highlights' },
                    
                    // --- 創意燈光 ---
                    { id: 'chiaroscuro', name: 'Chiaroscuro ｜ 明暗對照', desc: '創意燈光：劇性光影，模仿古典畫作。', prompt: 'chiaroscuro lighting, dramatic contrast' },
                    { id: 'rembrandt', name: 'Rembrandt ｜ 林布蘭', desc: '創意燈光：最強肖像層次。', prompt: 'Rembrandt lighting, triangle cheek highlight' },
                    { id: 'butterfly', name: 'Butterfly Lighting ｜ 蝴蝶光', desc: '創意燈光：鼻下蝶影，時尚攝影標配。', prompt: 'butterfly lighting, fashion style' },
                    { id: 'lowkey', name: 'Low-Key ｜ 低暗調', desc: '創意燈光：暗色調高反差，營造神祕感。', prompt: 'low-key lighting, heavy shadows, high contrast drama' },
                    { id: 'split_lit', name: 'Split Lighting ｜ 側向切光', desc: '創意燈光：戲劇感強烈。', prompt: 'split lighting setup, dramatic side light' },
                    { id: 'rimlight', name: 'Rim Light ｜ 輪廓光', desc: '創意燈光：勾勒邊緣。', prompt: 'powerful rim lighting, glowing edges' },
                    { id: 'gobo', name: 'Gobo Projection ｜ 遮光投影', desc: '創意燈光：投射陰影圖案。', prompt: 'gobo lighting, shadow patterns' },
                    { id: 'slash', name: 'Slash Lighting ｜ 條狀光', desc: '創意燈光：窄長硬光，定義焦點。', prompt: 'slash lighting, strip of hard light' },
                    { id: 'negfill', name: 'Negative Fill ｜ 負補光', desc: '創意燈光：強化陰影。', prompt: 'negative fill, deep rich shadows' },
                    { id: 'silhouette', name: 'Silhouette ｜ 剪影', desc: '創意燈光：強背光。', prompt: 'silhouette photography, strong backlight' },

                    // --- 環境光 ---
                    { id: 'natural_ambient', name: 'Natural Ambient ｜ 自然環境光', desc: '環境光：物理正確的環境反射採光。', prompt: 'natural environment ambient light, soft natural fill, realistic bounced light' },
                    { id: 'volumetric', name: 'Volumetric ｜ 體積光', desc: '環境光：光束路徑可見，空氣感強。', prompt: 'volumetric lighting, visible light beams' },
                    { id: 'candle', name: 'Candlelight ｜ 燭光', desc: '環境光：暖色溫營造氛圍。', prompt: '1800K candlelight, warm amber glow' },
                    { id: 'golden', name: 'Golden Hour ｜ 黃金時刻', desc: '環境光：日落暖金。', prompt: 'natural golden hour sun, warm glow' },
                    { id: 'blue', name: 'Blue Hour ｜ 藍調時刻', desc: '環境光：日落冷藍。', prompt: 'cold blue hour lighting, sapphire reflection' },
                    { id: 'neon', name: 'Neon Noir ｜ 霓虹黑色', desc: '環境光：霓虹未來感。', prompt: 'neon noir lighting, cyan and magenta color cast' },
                    { id: 'tyndall', name: 'Tyndall Effect ｜ 丁達爾', desc: '環境光：神聖光束感。', prompt: 'Tyndall effect, divine god rays' }
                ],
                luts: [
                    { id: 'correct', name: 'Color Accurate ｜ 色彩準確', desc: '標準色彩：精準還原色彩，中性參考。', prompt: 'calibrated color accuracy, neutral reference profile' },
                    { id: 'commercial', name: 'Commercial ｜ 頂級商攝', desc: '標準色彩：高端商業感。', prompt: 'high-end commercial editorial color science, standard white balance' },
                    { id: 'provia', name: 'Fujifilm Provia 100F ｜ 準確正片', desc: '標準色彩：色彩還原最準的正片。', prompt: 'Fujifilm Provia 100F (RDPIII), accurate slide film colors' },
                    { id: 'reala', name: 'Fujifilm Reala 500D ｜ 自然膚色', desc: '標準色彩：寬容度高，呈現自然。', prompt: 'Fujifilm Reala 500D film stock, exceptional skin tones' },
                    { id: 'portra400', name: 'Kodak Portra 400 ｜ 柯達', desc: '創意風格：人像首選，溫潤細膩。', prompt: 'Kodak Portra 400 film stock emulation, natural skin tones' },
                    { id: 'cinestill800', name: 'CineStill 800T ｜ 藍調', desc: '創意風格：夜景首選紅色光暈。', prompt: 'CineStill 800T, red halation highlights' },
                    { id: 'eterna', name: 'Fujifilm Eterna ｜ 富士電影', desc: '創意風格：低反差柔和質感。', prompt: 'Fujifilm Eterna film stock, soft look' },
                    { id: 'velvia', name: 'Fujifilm Velvia 50 ｜ 富士', desc: '創意風格：風景首選，高飽和。', prompt: 'Fujifilm Velvia 50, vivid landscape' },
                    { id: 'lomo', name: 'LOMO ｜ 洛莫風格', desc: '創意風格：高飽和強暗角，膠片感。', prompt: 'Lomography aesthetic, high saturation' },
                    { id: 'holga', name: 'Holga ｜ 賀加風格', desc: '創意風格：Lo-Fi 漏光模糊。', prompt: 'Holga photography style, lo-fi aesthetic' },
                    { id: 'sepia', name: 'Sepia Tone ｜ 懷舊褐', desc: '單色調：老照片美感。', prompt: 'sepia tone vintage photograph' },
                    { id: 'cyanotype', name: 'Cyanotype ｜ 藍曬', desc: '單色調：深藍工程圖質感。', prompt: 'cyanotype alternative process' },
                    { id: 'infrared', name: 'Rollei Infared 400 ｜ 紅外線', desc: '單色調：非現實光譜超脫感。', prompt: 'infrared photography, Rollei look' },
                    { id: 'hp5', name: 'Ilford HP5 Plus ｜ 經典黑白', desc: '黑白：紀實感強。', prompt: 'Ilford HP5 Plus black and white film' },
                    { id: 'tmax', name: 'Kodak T-MAX ｜ 紀錄黑白', desc: '黑白：細膩灰階層次。', prompt: 'Kodak T-MAX 400 film' }
                ],
                focals: [
                    { id: '6mm', name: '6mm ｜ 極廣魚眼', desc: '220度魚眼。' }, { id: '8mm', name: '8mm ｜ 180魚眼', desc: '標準魚眼。' },
                    { id: '12mm', name: '12mm ｜ 超級廣角', desc: '壯闊透視。' }, { id: '14mm', name: '14mm ｜ 超廣角', desc: '壯闊風景。' },
                    { id: '18mm', name: '18mm ｜ 電影廣角', desc: '經典廣角。' }, { id: '24mm', name: '24mm ｜ 標準廣角', desc: '生活紀實。' },
                    { id: '35mm', name: '35mm ｜ 人文視角', desc: '報導紀實焦段。' }, { id: '47mm', name: '47mm ｜ 自然視野', desc: '最自然比例。' },
                    { id: '50mm', name: '50mm ｜ 視平焦段', desc: '人眼透視。' }, { id: '55mm', name: '55mm ｜ 精準焦段', desc: 'Otus 標準。' },
                    { id: '85mm', name: '85mm ｜ 人像焦段', desc: '散景人像。' }, { id: '100mm', name: '100mm ｜ 微距特寫', desc: '細節捕捉。' },
                    { id: '200mm', name: '200mm ｜ 長焦壓縮', desc: '背景壓縮。' }, { id: '400mm', name: '400mm ｜ 超長焦', desc: '遠距離特寫。' },
                    { id: '600mm', name: '600mm ｜ 極望遠', desc: '野生動物捕捉。' }, { id: '800mm', name: '800mm ｜ 體育攝影', desc: '高清特寫。' },
                    { id: '1200mm', name: '1200mm ｜ 衛星視角', desc: '極端壓縮。' }, { id: '1800mm', name: '1800mm ｜ 超遠視距', desc: '極致望遠能力。' },
                    { id: '5200mm', name: '5200mm ｜ 地球極限', desc: '最強光學望遠。' }
                ],
                apertures: [
                    { id: 'T0.95', name: 'T0.95 ｜ 夜神光圈', desc: '夢幻極淺景深。' }, { id: 'T1.2', name: 'T1.2 ｜ 極淺景深', desc: '人像分離。' },
                    { id: 'T1.4', name: 'T1.4 ｜ 超大光圈', desc: '專業電影質感。' }, { id: 'T1.8', name: 'T1.8 ｜ 大光圈', desc: '淺景深分離。' },
                    { id: 'T2.0', name: 'T2.0 ｜ 專業光圈', desc: '解析平衡。' }, { id: 'T2.8', name: 'T2.8 ｜ 商業標準', desc: '穩定畫質。' },
                    { id: 'T4.0', name: 'T4.0 ｜ 中等光圈', desc: '主體清晰。' }, { id: 'T5.6', name: 'T5.6 ｜ 畫質頂點', desc: '全幅細節。' },
                    { id: 'T8.0', name: 'T8.0 ｜ 風景光圈', desc: '深焦全景。' }, { id: 'T11', name: 'T11 ｜ 極致深焦', desc: '全對焦。' },
                    { id: 'T16', name: 'T16 ｜ 縮小光圈', desc: '超深景深。' }, { id: 'T22', name: 'T22 ｜ 最小光圈', desc: '全畫面對焦。' }
                ],
                shotTypes: [
                    { id: 'EWS', name: 'EWS ｜ 極大遠景', desc: '壯闊大環境。' }, { id: 'WS', name: 'WS ｜ 全景', desc: '環境主體。' },
                    { id: 'FS', name: 'Full Shot ｜ 全身', desc: '完整身形。' }, { id: 'MLS', name: 'MLS ｜ 七分身', desc: '強調肢體。' },
                    { id: 'Cowboy', name: 'Cowboy ｜ 牛仔', desc: '膝上構圖。' }, { id: 'MS', name: 'Medium Shot ｜ 中景', desc: '標準敘事。' },
                    { id: 'MCU', name: 'MCU ｜ 中特寫', desc: '胸上親近。' }, { id: 'CU', name: 'Close-Up ｜ 特寫', desc: '面部表情。' },
                    { id: 'ECU', name: 'ECU ｜ 極特寫', desc: '微觀五官。' }, { id: 'Macro', name: 'Macro Shot ｜ 微距', desc: '極致紋理。' }
                ],
                perspectives: [
                    { id: 'eye', name: 'Eye-Level ｜ 平視', desc: '標準視線。' }, { id: 'low', name: 'Low Angle ｜ 仰視', desc: '英雄仰角。' },
                    { id: 'high', name: 'High Angle ｜ 俯視', desc: '脆弱俯角。' }, { id: 'overhead', name: 'Overhead ｜ 鳥瞰', desc: '垂直向下。' },
                    { id: 'worms', name: 'Worm’s Eye ｜ 蟲眼', desc: '貼地仰視。' }, { id: 'dutch', name: 'Dutch Angle ｜ 傾斜', desc: '不安視角。' },
                    { id: 'ots', name: 'OTS ｜ 過肩視角', desc: '對面主體。' }, { id: 'pov', name: 'POV ｜ 第一人稱', desc: '眼球模擬。' },
                    { id: 'selfie', name: 'Selfie Angle ｜ 自拍', desc: '手臂延伸。' }, { id: 'ground', name: 'Ground Level ｜ 地平', desc: '貼地平行。' }
                ],
                aspectRatios: ['1:1', '9:16', '16:9', '3:4', '4:3', '3:2', '2:3', '5:4', '4:5', '21:9']
            };

            const [shots, setShots] = useState(() => JSON.parse(localStorage.getItem('cine_shots_v11_8') || '[]'));
            const [current, setCurrent] = useState(() => JSON.parse(localStorage.getItem('cine_config_v11_8') || JSON.stringify({
                action: '', camera: 'phaseone', focal: '35mm', aperture: 'T2.8', lens: 'zeiss35', 
                perspective: 'eye', shotType: 'MCU', lighting: 'threepoint', lut: 'correct', aspect: '16:9'
            })));
            const [copyId, setCopyId] = useState(null);

            useEffect(() => localStorage.setItem('cine_shots_v11_8', JSON.stringify(shots)), [shots]);
            useEffect(() => localStorage.setItem('cine_config_v11_8', JSON.stringify(current)), [current]);

            const analyzeSubjectBoost = (text) => {
                if (!text) return "";
                const t = text.toLowerCase();
                let boosters = [];
                if (/(man|woman|girl|boy|face|eyes|skin|model|subject|hand|body|character|person|child|old)/i.test(t)) {
                    boosters.push("intricate skin pores, natural skin texture, lifelike hair strands, sub-surface scattering, detailed iris reflections, facial micro-expressions");
                }
                if (/(apple|fruit|bottle|product|glass|liquid|watch|jewelry|car|metal|object|gadget|iphone|phone|watch)/i.test(t)) {
                    boosters.push("physically accurate surface textures, micro-scratches, realistic light refraction and transmission, spectral caustic reflections, premium material rendering");
                }
                if (/(street|city|forest|mountain|room|inside|outside|landscape|interior|exterior)/i.test(t)) {
                    boosters.push("atmospheric depth, high fidelity environmental textures, naturalistic light occlusion");
                }
                return boosters.length > 0 ? boosters.join(", ") : "high precision physical rendering";
            };

            const finalPrompt = useMemo(() => {
                if (!current.action) return "把你心中所想的寫出來...（啟用動態偵測技術）";
                const findP = (cat, id) => {
                    const item = config[cat].find(i => i.id === id);
                    if (!item) return id;
                    return item.prompt || item.name;
                };
                const techChain = [
                    findP('shotTypes', current.shotType),
                    findP('perspectives', current.perspective),
                    current.action,
                    findP('cameras', current.camera),
                    findP('lenses', current.lens),
                    findP('lighting', current.lighting),
                    `focal length ${current.focal}`,
                    `aperture ${current.aperture}`,
                    findP('luts', current.lut)
                ];
                const boost = analyzeSubjectBoost(current.action);
                const quality = "hyper-realistic, 16K resolution, unreal engine 5.4, octane render, physically based rendering (PBR), global illumination, ray-tracing, depth of field";
                const aspect = `--ar ${current.aspect.replace(':', ':')}`;
                return `${techChain.join(", ")}, ${boost}, ${quality} ${aspect}`;
            }, [current]);

            const addShot = () => { if (current.action) { setShots([{ ...current, id: Date.now(), prompt: finalPrompt }, ...shots]); setCurrent({ ...current, action: '' }); } };

            const handleCopy = (text, id) => {
                const el = document.createElement('textarea');
                el.value = text; el.style.position = 'fixed'; el.style.left = '-9999px';
                document.body.appendChild(el); el.select();
                try { document.execCommand('copy'); setCopyId(id); setTimeout(() => setCopyId(null), 2000); } catch (e) {}
                document.body.removeChild(el);
            };

            const handleReset = () => { if (window.confirm("確定要重置目前的選單參數嗎？")) setCurrent({ action: '', camera: 'phaseone', focal: '35mm', aperture: 'T2.8', lens: 'zeiss35', perspective: 'eye', shotType: 'MCU', lighting: 'threepoint', lut: 'correct', aspect: '16:9' }); };
            const handleClear = () => { if (window.confirm("確定要清除所有分鏡紀錄嗎？")) setShots([]); };

            return (
                <div className="min-h-screen bg-[#070708] text-gray-200 font-sans p-2 md:p-6 pb-20">
                    <div className="max-w-screen-2xl mx-auto grid grid-cols-1 xl:grid-cols-12 gap-4 md:gap-6">
                        <div className="xl:col-span-5 space-y-4">
                            <header className="flex items-center justify-between px-2 pt-2">
                                <div className="flex items-center gap-3">
                                    <div className="bg-blue-600 p-2 rounded-xl shadow-lg"><Icon name="Smartphone" size={20} className="text-white" /></div>
                                    <div>
                                        <h1 className="text-lg font-black tracking-tighter text-white uppercase leading-none">CinePrompt Master</h1>
                                        <p className="text-[9px] text-gray-500 uppercase tracking-widest font-bold mt-1">V11.8 | PRODUCTION WORKSTATION</p>
                                    </div>
                                </div>
                                <div className="flex items-center gap-1.5 text-[8px] text-green-400 bg-green-400/5 px-2 py-1 rounded-full border border-green-400/20 font-bold"><Icon name="Brain" size={10} /> DYNAMIC REASONING</div>
                            </header>

                            <div className="bg-[#121214] border border-gray-800 rounded-3xl p-4 md:p-6 shadow-2xl space-y-5">
                                <div className="space-y-1.5">
                                    <label className="text-[10px] font-black text-gray-500 uppercase flex items-center gap-2 tracking-widest"><Icon name="ChevronRight" className="text-blue-500" size={14} /> Visual Beat 畫面描述</label>
                                    <textarea value={current.action} onChange={(e) => setCurrent({...current, action: e.target.value})} placeholder="把你心中所想的寫出來...（啟用動態偵測技術）" className="w-full bg-[#18181b] border border-gray-800 rounded-2xl p-4 text-sm focus:ring-1 focus:ring-blue-500 outline-none h-28 transition-all resize-none" />
                                </div>

                                <div className="space-y-4">
                                    {/* 第一列：攝影機 ｜ 焦距 ｜ 光圈 */}
                                    <div className="grid grid-cols-3 gap-3">
                                        <div className="space-y-1">
                                            <label className="text-[9px] font-black text-gray-400 uppercase flex items-center gap-1"><Icon name="Camera" size={10}/> 攝影機</label>
                                            <select value={current.camera} onChange={(e) => setCurrent({...current, camera: e.target.value})} className="w-full bg-[#1c1c1e] border border-gray-800 rounded-xl p-2 text-[10px] outline-none cursor-pointer">
                                                {config.cameras.map(c => <option key={c.id} value={c.id} title={c.desc}>{c.name}</option>)}
                                            </select>
                                        </div>
                                        <div className="space-y-1">
                                            <label className="text-[9px] font-black text-gray-400 uppercase flex items-center gap-1"><Icon name="Focus" size={10}/> 焦距</label>
                                            <select value={current.focal} onChange={(e) => setCurrent({...current, focal: e.target.value})} className="w-full bg-[#1c1c1e] border border-gray-800 rounded-xl p-2 text-[10px] outline-none cursor-pointer">
                                                {config.focals.map(f => <option key={f.id} value={f.id} title={f.desc}>{f.name}</option>)}
                                            </select>
                                        </div>
                                        <div className="space-y-1">
                                            <label className="text-[9px] font-black text-gray-400 uppercase flex items-center gap-1"><Icon name="Zap" size={10}/> 光圈</label>
                                            <select value={current.aperture} onChange={(e) => setCurrent({...current, aperture: e.target.value})} className="w-full bg-[#1c1c1e] border border-gray-800 rounded-xl p-2 text-[10px] outline-none cursor-pointer">
                                                {config.apertures.map(a => <option key={a.id} value={a.id} title={a.desc}>{a.name}</option>)}
                                            </select>
                                        </div>
                                    </div>

                                    {/* 第二列：鏡頭系列 ｜ 色彩Lut */}
                                    <div className="grid grid-cols-2 gap-3">
                                        <div className="space-y-1">
                                            <label className="text-[9px] font-black text-gray-400 uppercase flex items-center gap-1"><Icon name="Maximize" size={10}/> 鏡頭系列</label>
                                            <select value={current.lens} onChange={(e) => setCurrent({...current, lens: e.target.value})} className="w-full bg-[#1c1c1e] border border-gray-800 rounded-xl p-2 text-[10px] outline-none cursor-pointer">
                                                {config.lenses.map(l => <option key={l.id} value={l.id} title={l.desc}>{l.name}</option>)}
                                            </select>
                                        </div>
                                        <div className="space-y-1">
                                            <label className="text-[9px] font-black text-gray-400 uppercase flex items-center gap-1"><Icon name="Palette" size={10}/> 色彩 Lut</label>
                                            <select value={current.lut} onChange={(e) => setCurrent({...current, lut: e.target.value})} className="w-full bg-[#1c1c1e] border border-gray-800 rounded-xl p-2 text-[10px] outline-none cursor-pointer">
                                                {config.luts.map(u => <option key={u.id} value={u.id} title={u.desc}>{u.name} ｜ {u.desc.split('：')[0]}</option>)}
                                            </select>
                                        </div>
                                    </div>

                                    {/* 第三列：景別 ｜ 拍攝視角 */}
                                    <div className="grid grid-cols-2 gap-3">
                                        <div className="space-y-1">
                                            <label className="text-[9px] font-black text-gray-400 uppercase flex items-center gap-1"><Icon name="Eye" size={10}/> 景別</label>
                                            <select value={current.shotType} onChange={(e) => setCurrent({...current, shotType: e.target.value})} className="w-full bg-[#1c1c1e] border border-gray-800 rounded-xl p-2 text-[10px] outline-none cursor-pointer">{config.shotTypes.map(s => <option key={s.id} value={s.id}>{s.name}</option>)}</select>
                                        </div>
                                        <div className="space-y-1">
                                            <label className="text-[9px] font-black text-gray-400 uppercase flex items-center gap-1"><Icon name="Layers" size={10}/> 拍攝視角</label>
                                            <select value={current.perspective} onChange={(e) => setCurrent({...current, perspective: e.target.value})} className="w-full bg-[#1c1c1e] border border-gray-800 rounded-xl p-2 text-[10px] outline-none cursor-pointer">{config.perspectives.map(p => <option key={p.id} value={p.id}>{p.name}</option>)}</select>
                                        </div>
                                    </div>

                                    {/* 第四列：燈光設定 ｜ 輸出比例 */}
                                    <div className="grid grid-cols-2 gap-3">
                                        <div className="space-y-1">
                                            <label className="text-[9px] font-black text-yellow-500 uppercase flex items-center gap-1"><Icon name="Sun" size={10}/> 燈光設定</label>
                                            <select value={current.lighting} onChange={(e) => setCurrent({...current, lighting: e.target.value})} className="w-full bg-[#1c1c1e] border border-yellow-900/20 rounded-xl p-2 text-[10px] outline-none text-yellow-500/80 cursor-pointer">
                                                {config.lighting.map(l => <option key={l.id} value={l.id} title={l.desc}>{l.name} ｜ {l.desc.split('：')[0]}</option>)}
                                            </select>
                                        </div>
                                        <div className="space-y-1">
                                            <label className="text-[9px] font-black text-gray-400 uppercase flex items-center gap-1"><Icon name="Monitor" size={10}/> 輸出比例</label>
                                            <select value={current.aspect} onChange={(e) => setCurrent({...current, aspect: e.target.value})} className="w-full bg-[#1c1c1e] border border-gray-800 rounded-xl p-2 text-[10px] outline-none cursor-pointer">{config.aspectRatios.map(r => <option key={r} value={r}>{r}</option>)}</select>
                                        </div>
                                    </div>
                                </div>

                                <button onClick={addShot} disabled={!current.action} className="w-full py-4 rounded-2xl font-black text-xs uppercase tracking-widest transition-all shadow-lg active:scale-95 bg-blue-600 hover:bg-blue-500 text-white shadow-blue-900/30 disabled:bg-gray-800 disabled:text-gray-600 disabled:cursor-not-allowed">Add Shot to Timeline</button>
                            </div>

                            <div className="bg-[#121214] border border-blue-900/20 rounded-3xl p-4 relative overflow-hidden group italic">
                                <div className="absolute top-0 left-0 w-1 h-full bg-blue-600 group-hover:w-2 transition-all"></div>
                                <div className="flex justify-between items-center mb-2">
                                    <label className="text-[9px] font-black text-blue-500 uppercase tracking-widest flex items-center gap-2"><Icon name="Brain" size={10}/> Live Master Prompt</label>
                                    <button onClick={() => handleCopy(finalPrompt, 'live')} className="text-[9px] bg-blue-600/10 text-blue-400 px-3 py-1 rounded-full hover:bg-blue-600/20 font-bold border border-blue-600/20 transition-all active:scale-90">{copyId === 'live' ? 'COPIED!' : 'COPY'}</button>
                                </div>
                                <div className="font-mono text-[10px] leading-relaxed text-gray-500 max-h-[140px] overflow-y-auto custom-scrollbar">{finalPrompt}</div>
                            </div>
                        </div>

                        <div className="xl:col-span-7 flex flex-col gap-4">
                            <div className="flex justify-between items-center px-1">
                                <h2 className="text-xs font-black text-gray-500 uppercase tracking-widest flex items-center gap-2"><Icon name="Film" size={16} /> Shot List Timeline</h2>
                                <div className="flex gap-4">
                                    <button onClick={handleReset} className="text-[10px] font-bold text-gray-500 hover:text-white flex items-center gap-1 transition-colors"><Icon name="RotateCcw" size={14}/> RESET</button>
                                    <button onClick={handleClear} className="text-[10px] font-bold text-red-500/80 hover:text-red-500 flex items-center gap-1 transition-colors"><Icon name="Trash2" size={14}/> CLEAR</button>
                                    <button onClick={() => { let csv = "Shot#,Action,Specs,Prompt\n"; shots.forEach((s, i) => csv += `${shots.length-i},"${s.action}","${s.camera}|${s.lens}","${s.prompt}"\n`); const blob = new Blob([csv], { type: 'text/csv;charset=utf-8;' }); const url = URL.createObjectURL(blob); const link = document.createElement("a"); link.href = url; link.download = `Ian_Production_ShotList.csv`; link.click(); }} className="text-[10px] font-bold text-blue-500 hover:text-blue-400 flex items-center gap-1 transition-colors"><Icon name="Download" size={14}/> EXPORT</button>
                                </div>
                            </div>
                            <div className="bg-[#121214] border border-gray-800 rounded-3xl flex-1 overflow-hidden shadow-inner flex flex-col">
                                <div className="overflow-y-auto max-h-[750px] custom-scrollbar">
                                    <table className="w-full text-left text-xs">
                                        <thead className="bg-[#18181b] text-[9px] text-gray-500 uppercase font-black border-b border-gray-800 sticky top-0 z-10">
                                            <tr><th className="px-5 py-4 w-12 text-center">#</th><th className="px-5 py-4">Visual Narrative</th><th className="px-5 py-4 w-44">Technical Specs</th><th className="px-5 py-4 w-24 text-right">Action</th></tr>
                                        </thead>
                                        <tbody className="divide-y divide-gray-800/50">
                                            {shots.length === 0 ? (<tr><td colSpan="4" className="px-5 py-40 text-center text-gray-600 font-medium italic">尚未建立分鏡，請在左側輸入描述...</td></tr>) : (
                                                shots.map((s, idx) => (
                                                    <tr key={s.id} className="hover:bg-blue-600/5 transition-colors group">
                                                        <td className="px-5 py-6 text-gray-600 font-bold text-center">{shots.length - idx}</td>
                                                        <td className="px-5 py-6">
                                                            <div className="font-black text-gray-100 mb-1.5 leading-tight text-sm">{s.action}</div>
                                                            <div className="text-[10px] text-blue-500/60 font-mono line-clamp-2 italic">{s.prompt}</div>
                                                        </td>
                                                        <td className="px-5 py-6">
                                                            <div className="flex flex-wrap gap-1.5">
                                                                <span className="text-[8px] bg-blue-900/20 text-blue-400 px-1.5 py-0.5 rounded-lg border border-blue-900/30 font-bold uppercase">{s.shotType}</span>
                                                                <span className="text-[8px] bg-gray-800 text-gray-400 px-1.5 py-0.5 rounded-lg font-bold uppercase">{s.focal}</span>
                                                                <span className="text-[8px] bg-yellow-900/20 text-yellow-500 px-1.5 py-0.5 rounded-lg border border-yellow-900/30 font-bold uppercase">{config.luts.find(l => l.id === s.lut)?.name.split('｜')[0].trim().split(' ')[0]}</span>
                                                                <span className="text-[8px] bg-white/5 text-gray-500 px-1.5 py-0.5 rounded-lg border border-white/10 font-bold uppercase">{s.aspect}</span>
                                                            </div>
                                                        </td>
                                                        <td className="px-5 py-6 text-right">
                                                            <div className="flex justify-end gap-3 opacity-60 group-hover:opacity-100 transition-opacity">
                                                                <button onClick={() => handleCopy(s.prompt, s.id)} className={`p-2.5 rounded-xl transition-all active:scale-90 ${copyId === s.id ? 'bg-green-600 text-white' : 'bg-gray-800 text-gray-400 hover:text-white hover:bg-blue-600'}`}>{copyId === s.id ? <Icon name="CheckCircle2" size={16} /> : <Icon name="Copy" size={16} />}</button>
                                                                <button onClick={() => setShots(shots.filter(i => i.id !== s.id))} className="p-2.5 rounded-xl bg-gray-800 text-gray-400 hover:text-white hover:bg-red-600 transition-all active:scale-90"><Icon name="Trash2" size={16} /></button>
                                                            </div>
                                                        </td>
                                                    </tr>
                                                ))
                                            )}
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                            <footer className="text-[9px] text-gray-700 flex justify-between items-center px-2 font-black mt-2">
                                <div>PBR ACTIVE | 16K SUPER-RES ENHANCED</div>
                                <div>© 2026 CINEPROMPT MASTER WORKSTATION</div>
                            </footer>
                        </div>
                    </div>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
