<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>CinePrompt Master</title>
    <!-- iOS App æ”¯æ´æ¨™ç±¤ -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="CinePrompt">
    
    <!-- React & Tailwind CDN -->
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Lucide Vanilla Script (ç©©å®šç‰ˆåœ–ç¤ºç³»çµ±) -->
    <script src="https://unpkg.com/lucide@latest"></script>
    
    <style>
        body { background-color: #070708; color: #e4e4e7; -webkit-tap-highlight-color: transparent; }
        .custom-scrollbar::-webkit-scrollbar { width: 4px; }
        .custom-scrollbar::-webkit-scrollbar-track { background: transparent; }
        .custom-scrollbar::-webkit-scrollbar-thumb { background: #27272a; border-radius: 20px; }
        .custom-scrollbar::-webkit-scrollbar-thumb:hover { background: #3f3f46; }
        
        /* å„ªåŒ–é¸å–®æ¨£å¼èˆ‡å­—é«”å¤§å° */
        select { 
            -webkit-appearance: none; 
            appearance: none; 
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 24 24' stroke='%23666'%3E%3Cpath stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M19 9l-7 7-7-7'%3E%3C/path%3E%3C/svg%3E"); 
            background-repeat: no-repeat; 
            background-position: right 0.75rem center; 
            background-size: 1.1rem; 
            padding-right: 2.5rem !important;
            font-size: 13px !important; 
            line-height: 1.5;
        }

        /* å‹¾é¸æ¡†å„ªåŒ– */
        input[type="checkbox"] {
            width: 1.25rem;
            height: 1.25rem;
            accent-color: #2563eb;
            cursor: pointer;
        }

        /* æ‹–æ›³æ‰‹å‹¢ */
        .drag-handle {
            cursor: grab;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 0 8px;
            color: #3f3f46;
            transition: color 0.2s;
        }
        .drag-handle:active {
            cursor: grabbing;
        }
        .drag-handle:hover {
            color: #60a5fa;
        }
        
        tr.dragging {
            opacity: 0.5;
            background-color: #1e1e2e;
        }

        @media (max-width: 640px) { 
            select, textarea, button { font-size: 16px !important; } 
            .mobile-label { font-size: 11px !important; }
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useMemo, useEffect, useRef } = React;

        const Icon = ({ name, size = 16, className = "" }) => {
            useEffect(() => {
                if (window.lucide) { window.lucide.createIcons(); }
            }, [name]);
            return <i data-lucide={name.toLowerCase()} style={{ width: size, height: size }} className={`inline-block ${className}`}></i>;
        };

        const App = () => {
            const config = {
                cameras: [
                    { id: 'none', name: 'None ï½œ ä¸æŒ‡å®š', desc: 'ä¸æŒ‡å®šæ”å½±æ©Ÿåƒæ•¸ï¼Œä¿ç•™ç©ºç™½ã€‚', prompt: '' },
                    { id: 'phaseone', name: 'Phase One XF IQ4 ï½œ é£›æ€ä¸€å„„', desc: 'å•†æ¥­é«˜å“è³ªï¼šæ¥µè‡´å•†æ¥­éœç‰©æ”å½±ï¼Œç´‹ç†ç´°ç¯€çˆ†æ£šã€‚', prompt: 'shot on Phase One XF IQ4 150MP, medium format clarity, commercial macro precision' },
                    { id: 'h6d', name: 'Hasselblad H6D-100c ï½œ å“ˆè˜‡ä¸­å¹…', desc: 'å•†æ¥­é«˜å“è³ªï¼šè‰²å½©æ·±åº¦æ¥µé«˜ï¼Œé©åˆé«˜ç´šç”¢å“èˆ‡äººåƒã€‚', prompt: 'shot on Hasselblad H6D-100c, high color depth, elite commercial aesthetic' },
                    { id: 'gfx100', name: 'Fujifilm GFX 100 II ï½œ å¯Œå£«ä¸­å¹…', desc: 'å•†æ¥­é«˜å“è³ªï¼šå¯Œå£«ç¨æœ‰è‰²å½©æ¨¡æ“¬ï¼Œæ¥µé«˜å¯¬å®¹åº¦ã€‚', prompt: 'shot on Fujifilm GFX 100 II, medium format depth, film simulation colors' },
                    { id: '5d4', name: 'Canon 5D Mark IV ï½œ ä½³èƒ½ 5D4', desc: 'å•†æ¥­é«˜å“è³ªï¼šæ¨™æº–å•†æ¥­æ•¸ä½å–®çœ¼è³ªæ„Ÿï¼Œè‰²å½©è¨å–œã€‚', prompt: 'shot on Canon EOS 5D Mark IV, standard DSLR look, vibrant warm tones' },
                    { id: 'venice2', name: 'Sony VENICE 2 ï½œ ç´¢å°¼å¨å°¼æ–¯', desc: 'å•†æ¥­é«˜å“è³ªï¼šè‰²å½©é‚„åŸæº–ç¢ºï¼Œè†šè‰²è‡ªç„¶ï¼Œé«˜æ„Ÿç´”æ·¨ã€‚', prompt: 'shot on Sony VENICE 2, CineAlta color science, natural skin tones, high ISO purity' },
                    { id: 'm11m', name: 'Leica M11 Monochrom ï½œ å¾ å¡é»‘ç™½', desc: 'å•†æ¥­é«˜å“è³ªï¼šç´”ç²¹çš„é»‘ç™½ç°éšï¼Œé«˜å°æ¯”èˆ‡éŠ³åˆ©åº¦ã€‚', prompt: 'shot on Leica M11 Monochrom, pure B&W photography, high contrast grayscale' },
                    { id: 'nkonf3', name: 'Nikon F3 ï½œ å°¼åº· F3', desc: 'å•†æ¥­é«˜å“è³ªï¼šç¶“å…¸æ–°èæ”å½±è³ªæ„Ÿï¼Œæ¨¸å¯¦å‰›ç¡¬ã€‚', prompt: 'shot on Nikon F3, 35mm photojournalism aesthetic, robust analog look' },
                    { id: 'arri35', name: 'ARRI Alexa 35 ï½œ é˜¿èŠ 35', desc: 'é›»å½±ç³»çµ±ï¼šæœ€æ–° ALEV 4 æ„Ÿå…‰å…ƒä»¶ï¼Œå½±è¦–å·¥æ¥­æœ€é«˜æ¨™æº–ã€‚', prompt: 'shot on ARRI Alexa 35, ALEV 4 sensor, cinematic textures, superior color science' },
                    { id: 'arri65', name: 'ARRI Alexa 65 ï½œ é˜¿èŠ 65', desc: 'é›»å½±ç³»çµ±ï¼šé ‚ç´šé›»å½±æ„Ÿï¼Œæ¥µè‡´å‹•æ…‹ç¯„åœã€‚', prompt: 'shot on ARRI Alexa 65, ALEV 3 A3X sensor, legendary cinematic dynamic range' },
                    { id: 'imax70', name: 'IMAX 15/70mm ï½œ IMAX åº•ç‰‡', desc: 'é›»å½±ç³»çµ±ï¼šå·¨å¤§çš„ç•«å¹…ï¼Œæ¥µè‡´è§£æåº¦èˆ‡æ·ºæ™¯æ·±ã€‚', prompt: 'shot on IMAX 15/70mm film, massive 18k resolution, ultra-wide gate' },
                    { id: 'raptor', name: 'RED V-Raptor XL ï½œ RED çŒ›ç¦½', desc: 'é›»å½±ç³»çµ±ï¼šæ¥µåº¦éŠ³åˆ©ã€é«˜åå·®çš„ç¾ä»£å•†æ¥­è³ªæ„Ÿã€‚', prompt: 'shot on RED V-Raptor XL, 8K VistaVision, sharp modern commercial contrast' },
                    { id: 'dxl2', name: 'Panavision Millennium DXL2', desc: 'é›»å½±ç³»çµ±ï¼šå¸•é‚£ç¶­ç”³ DXL2ï¼Œå¥½èŠå¡¢å¤§ç‰‡è³ªæ„Ÿã€‚', prompt: 'shot on Panavision Millennium DXL2, 8K Large Format, distinct Panavision color' },
                    { id: 'ursa12k', name: 'Blackmagic URSA 12K ï½œ BMD', desc: 'é›»å½±ç³»çµ±ï¼šæ¥µè‡´æ•¸ä½ç´°ç¯€ï¼Œè‰²å½©ç§‘å­¸åè† ç‰‡ã€‚', prompt: 'shot on Blackmagic URSA Mini Pro 12K, high resolution detail, filmic color' },
                    { id: 'iphone', name: 'iPhone 16 Pro ï½œ è˜‹æœæ‰‹æ©Ÿ', desc: 'å‰µæ„èˆ‡ç‰¹æ•ˆï¼šè¨ˆç®—æ”å½±æ„Ÿï¼Œé«˜ä¾¿æ”œæ€§èˆ‡å½±ç‰‡è‰²å½©ã€‚', prompt: 'shot on iPhone 16 Pro, mobile cinematography, computational photography aesthetic, realistic lens texture' },
                    { id: 'arri16sr', name: 'Arriflex 16SR ï½œ å‚³å¥‡ 16mm', desc: 'å‰µæ„ç‰¹æ•ˆï¼šç¶“å…¸ç´€éŒ„ç‰‡è³ªæ„Ÿï¼Œæœ‰æ©Ÿé¡†ç²’èˆ‡æ‡·èˆŠè‰²å½©ã€‚', prompt: 'shot on Arriflex 16SR 16mm film, organic celluloid grain, nostalgic vintage texture' },
                    { id: 'phantom', name: 'Phantom Flex4K ï½œ æ…¢å‹•ä½œæ©Ÿ', desc: 'å‰µæ„ç‰¹æ•ˆï¼šè§¸ç™¼ã€Œæ¶²é«”å‡çµã€ã€ã€Œæ…¢å‹•ä½œã€ç‰¹æ•ˆã€‚', prompt: 'shot on Phantom Flex4K, high-speed photography, liquid splash freeze' },
                    { id: 'bolex', name: '16mm Bolex H16 ï½œ 16é‡ç±³', desc: 'å‰µæ„ç‰¹æ•ˆï¼šç¨ç«‹é›»å½±æ„Ÿï¼Œé‚Šç·£æŸ”å’Œï¼Œé¡†ç²’æ˜é¡¯ã€‚', prompt: 'shot on 16mm Bolex H16, vintage 16mm film grain, soft edges' },
                    { id: 'super8', name: 'Super 8mm Film ï½œ è¶…8åº•ç‰‡', desc: 'å‰µæ„ç‰¹æ•ˆï¼šå®¶åº­éŒ„å½±å¸¶è³ªæ„Ÿï¼Œä½ç•«è³ªæ‡·èˆŠæ„Ÿã€‚', prompt: 'shot on Super 8mm film, nostalgic grainy home video aesthetic' },
                    { id: 'gopro', name: 'GoPro Hero 12 ï½œ é‹å‹•æ©Ÿ', desc: 'å‰µæ„ç‰¹æ•ˆï¼šè¶…å»£è§’ã€é­šçœ¼è®Šå½¢ã€æ¥µé™è¦–è§’ã€‚', prompt: 'shot on GoPro Hero 12, wide fisheye lens, action camera perspective' },
                    { id: 'mavic3', name: 'DJI Mavic 3 Cine ï½œ èˆªæ‹æ©Ÿ', desc: 'å‰µæ„ç‰¹æ•ˆï¼šä¿¯ç°è¦–è§’ï¼Œå»£é—Šé¢¨æ™¯ï¼Œå¹³ç©©é‹é¡ã€‚', prompt: 'shot on DJI Mavic 3 Cine, aerial drone perspective, sweeping landscape' },
                    { id: 'sx70', name: 'Polaroid SX-70 ï½œ å¯¶éº—ä¾†', desc: 'å‰µæ„ç‰¹æ•ˆï¼šæŸ”ç„¦ã€åè‰²ã€ç™½è‰²é‚Šæ¡†æ„Ÿã€‚', prompt: 'shot on Polaroid SX-70, instant film aesthetic, soft focus, square white border' },
                    { id: 'thermal', name: 'Thermal Camera ï½œ ç†±æˆåƒå„€', desc: 'å‰µæ„ç‰¹æ•ˆï¼šç´…å¤–ç·šç†±æ„Ÿè¦–è¦ºï¼Œå½©è™¹è‰²è­œã€‚', prompt: 'shot on thermal imaging camera, infrared heat signature, rainbow spectrum' },
                    { id: 'nightvision', name: 'Night Vision ï½œ å¤œè¦–é¡', desc: 'å‰µæ„ç‰¹æ•ˆï¼šç¶ è‰²è¢å…‰å–®è‰²èª¿ï¼Œå……æ»¿å™ªé»ã€‚', prompt: 'shot through military night vision goggles, monochromatic green phosphor glow' }
                ],
                lenses: [
                    { id: 'none', name: 'None ï½œ ä¸æŒ‡å®š', desc: 'ä¸æŒ‡å®šé¡é ­åƒæ•¸ï¼Œä¿ç•™ç©ºç™½ã€‚', prompt: '' },
                    { id: 'otus55', name: 'Zeiss Otus 55mm f/1.4 ï½œ 50mm', desc: 'å•†æ”é«˜å“è³ªï¼šç„¡è¦–åƒå·®ï¼Œæ¥µè‡´ç‰©ç†æ­£ç¢ºã€‚', prompt: 'Zeiss Otus 55mm f/1.4, apochromatic precision, flawless resolution' },
                    { id: 'sigma14', name: 'Sigma 14mm f/1.4 Art ï½œ 14mm', desc: 'å•†æ”é«˜å“è³ªï¼šå£¯é—Šæ˜Ÿç©ºèˆ‡å»ºç¯‰ï¼Œæ¥µè‡´è§£æåº¦ã€‚', prompt: 'Sigma 14mm f/1.4 DG DN Art lens, wide perspective, high corner-to-corner sharpness' },
                    { id: 'canon85L', name: 'Canon EF 85mm f/1.2L ï½œ 85mm', desc: 'å•†æ”é«˜å“è³ªï¼šå¤¢å¹»å¥¶æ²¹æ•£æ™¯ï¼Œçœ¼ç¥å…‰æ•æ‰ã€‚', prompt: 'Canon EF 85mm f/1.2L II USM, legendary creamy bokeh, portrait compression' },
                    { id: 'macro100', name: 'Macro 100mm ï½œ 100mm', desc: 'å•†æ”é«˜å“è³ªï¼šæ¥µè‡´ç‰¹å¯«ï¼Œé¡¯å¾®ç´‹ç†ã€‚', prompt: '100mm macro lens, surface details' },
                    { id: 'zeiss35', name: 'Zeiss Distagon 35mm ï½œ 35mm', desc: 'å•†æ”é«˜å“è³ªï¼šç¶“å…¸äººæ–‡è¦–è§’ï¼Œè‰²å½©æ²¹æ½¤ç«‹é«”ã€‚', prompt: 'Zeiss Distagon T* 35mm f/1.4, micro-contrast, 3D pop aesthetic' },
                    { id: 'canon1124', name: 'Canon EF 11-24mm f/4L ï½œ 12mm', desc: 'å•†æ”é«˜å“è³ªï¼šå…¨çƒæœ€å»£ç›´ç·šé€è¦–ï¼Œç„¡é­šçœ¼ç•¸è®Šã€‚', prompt: 'Canon EF 11-24mm f/4L USM lens, rectilinear ultra-wide perspective, minimal distortion' },
                    { id: 'nikon1424', name: 'Nikkor 14-24mm f/2.8G ï½œ 14mm', desc: 'å•†æ”é«˜å“è³ªï¼šé¢¨æ™¯æ”å½±å‚³è¨˜ï¼Œå£¯é—Šç©ºé–“æ„Ÿã€‚', prompt: 'Nikkor 14-24mm f/2.8G ED lens, expansive wide-angle field of view, superior contrast' },
                    { id: 'nikkor24', name: 'Nikkor 24mm f/1.4G ï½œ 24mm', desc: 'å•†æ”é«˜å“è³ªï¼šæ¥µè‡´è§£åƒèˆ‡é‚Šç·£ç•«è³ªã€‚', prompt: 'Nikkor 24mm f/1.4G ED lens, sharp wide angle, professional optics' },
                    { id: 'canon70200', name: 'Canon EF 70-200mm f/2.8L ï½œ 200mm', desc: 'å•†æ”é«˜å“è³ªï¼šèƒŒæ™¯å¼·çƒˆè²¼è¿‘ï¼Œç´°è†©çš„åˆ†é›¢æ„Ÿã€‚', prompt: 'Canon EF 70-200mm f/2.8L IS III USM, professional telephoto compression' },
                    { id: 'canon600', name: 'Canon EF 600mm f/4L ï½œ 600mm', desc: 'å•†æ”é«˜å“è³ªï¼šé‡ç”Ÿå‹•ç‰©èˆ‡ç«¶æŠ€æ•æ‰é¦–é¸ã€‚', prompt: 'Canon EF 600mm f/4L IS III USM, extreme telephoto range, ultra-sharp isolation' },
                    { id: 'arrisig', name: 'ARRI Signature Prime ï½œ 47mm', desc: 'é›»å½±é¡ï¼šè‡ªç„¶è†šè‰²ä¹‹å·”ï¼Œæ¥µè‡´æŸ”ç¾æ•£æ™¯ã€‚', prompt: 'ARRI Signature Prime lens, LPL mount, naturalistic rendering, creamy texture' },
                    { id: 'xtal', name: 'JDC Xtal Xpress ï½œ 50mm Anamorphic', desc: 'é›»å½±é¡ï¼šå‚³å¥‡è®Šå½¢é¡ï¼Œç¨ç‰¹è€€å…‰èˆ‡é›»å½±å‘³ã€‚', prompt: 'JDC Xtal Xpress Anamorphic lens, Joe Dunton vintage glass, legendary anamorphic flare' },
                    { id: 'hawkvlite', name: 'Hawk V-Lite ï½œ 55mm Anamorphic', desc: 'é›»å½±é¡ï¼šç·Šæ¹Šå‹ç¾ä»£è®Šå½¢é¡æ¨™ç«¿ã€‚', prompt: 'Hawk V-Lite Anamorphic lens, modern cinematic anamorphic look' },
                    { id: 'cooke', name: 'Cooke S4/i Prime ï½œ 35mm', desc: 'é›»å½±é¡ï¼šè†šè‰²æº«æ½¤ï¼Œç„¦å¤–æŸ”å’Œï¼Œç¶“å…¸åº«å…‹æ„Ÿã€‚', prompt: 'Cooke S4/i Prime lens, warm "Cooke Look", organic highlights' },
                    { id: 'panamorph', name: 'Panavision Anamorphic ï½œ 40mm', desc: 'é›»å½±é¡ï¼šè—è‰²è€€å…‰ï¼Œæ©¢åœ“æ•£æ™¯ï¼Œå¯¬è¢å¹•ã€‚', prompt: 'Panavision C-Series Anamorphic lens, horizontal blue flares, oval bokeh' },
                    { id: 'leicalux', name: 'Leica Summilux-C ï½œ 35mm', desc: 'é›»å½±é¡ï¼šé«˜å¾®åå·®ï¼ŒéŠ³åˆ©é€šé€ï¼Œé ‚ç´šå…‰å­¸ã€‚', prompt: 'Leica Summilux-C, high micro-contrast, optical clarity' },
                    { id: 'zeisssup', name: 'Zeiss Supreme Prime ï½œ 50mm', desc: 'é›»å½±é¡ï¼šç¾ä»£ä¹¾æ·¨ï¼Œç§‘æŠ€æ„Ÿå¼·ã€‚', prompt: 'Zeiss Supreme Prime, clean modern rendering' },
                    { id: 'k35', name: 'Canon K-35 Vintage ï½œ 35mm', desc: 'é›»å½±é¡ï¼šæš–èª¿ä½åå·®ï¼Œç¶“å…¸å¾©å¤å…‰æšˆã€‚', prompt: 'vintage Canon K-35 prime, nostalgic warm bloom' },
                    { id: 'angenieux', name: 'AngÃ©nieux Optimo ï½œ 24-290mm', desc: 'é›»å½±é¡ï¼šæ»‘é †è®Šç„¦ï¼Œå·¥æ¥­ç´šé«˜å“è³ªè³ªæ„Ÿã€‚', prompt: 'AngÃ©nieux Optimo zoom, creamy cinema texture' },
                    { id: 'nikon1700', name: 'Nikkor 1200-1700mm ï½œ 1700mm', desc: 'ç‰¹æ®Šé¡é ­ï¼š1700mmï¼šæ¥µç«¯æœ›é è®Šç„¦ï¼Œé è·é›¢ç‹è€…ã€‚', prompt: 'Nikkor 1200-1700mm f/5.6-8.0P ED IF lens, super telephoto zoom, extreme spatial flattening' },
                    { id: 'canon800', name: 'Canon EF 800mm f/5.6L ï½œ 800mm', desc: 'ç‰¹æ®Šé¡é ­ï¼šé•·ç„¦ä¹‹å·”ï¼Œæ¥µè‡´èƒŒæ™¯åˆ†é›¢ã€‚', prompt: 'Canon EF 800mm f/5.6L IS USM, maximum telephoto reach, ultra-sharp subject isolation' },
                    { id: 'canon1200', name: 'Canon EF 1200mm f/5.6L ï½œ 1200mm', desc: 'ç‰¹æ®Šé¡é ­ï¼šè¡›æ˜Ÿç´šç©ºé–“æ„Ÿï¼Œæ¥µç«¯å£“ç¸®ã€‚', prompt: 'Canon EF 1200mm f/5.6L USM, extreme telephoto compression, super distance' },
                    { id: 'canon5200', name: 'Canon 5200mm Mirror ï½œ 5200mm', desc: 'ç‰¹æ®Šé¡é ­ï¼šåœ°çƒæ¥µé™æœ›é èƒ½åŠ›ã€‚', prompt: 'Canon 5200mm f/14 mirror lens, world largest prime, astronomical scale' },
                    { id: 'nikkor6mm', name: 'Nikkor 6mm f/2.8 Fisheye ï½œ 6mm', desc: 'ç‰¹æ®Šé¡é ­ï¼š220åº¦å…¨çƒæœ€å»£è§’é­šçœ¼ã€‚', prompt: 'Nikkor 6mm f/2.8 fisheye lens, extreme 220-degree circular distortion' },
                    { id: 'nikkor8mm', name: 'Nikkor 8mm f/2.8 ï½œ 8mm', desc: 'ç‰¹æ®Šé¡é ­ï¼šæ¨™æº–é­šçœ¼ï¼Œå¼·çƒˆè¦–è¦ºè¡æ“Šã€‚', prompt: 'Nikkor 8mm f/2.8 fisheye lens, 180-degree circular perspective' },
                    { id: 'helios', name: 'Helios 44-2 ï½œ 58mm', desc: 'ç‰¹æ®Šé¡é ­ï¼šå‚³å¥‡å…«ç¾½æ€ªï¼Œæ—‹è½‰æ•£æ™¯æ•ˆæœã€‚', prompt: 'Helios 44-2 lens, extreme swirly radial bokeh' },
                    { id: 'probe', name: 'Laowa 24mm Probe ï½œ 24mm Macro', desc: 'ç‰¹æ®Šé¡é ­ï¼šèŸ²è¦–è§’å¾®è·ï¼Œç©¿è¶Šæ¥µé™ã€‚', prompt: 'Laowa 24mm Probe lens, bug-eye perspective' },
                    { id: 'tiltshift', name: 'Tilt-Shift Lens ï½œ ç§»è»¸', desc: 'ç‰¹æ®Šé¡é ­ï¼šå¾®ç¸®æ•ˆæœï¼Œä¿®æ­£é€è¦–ã€‚', prompt: 'tilt-shift lens effect, miniature model aesthetic' },
                    { id: 'split', name: 'Split Diopter ï½œ é›™ç„¦é¡', desc: 'ç‰¹æ®Šé¡é ­ï¼šå‰å¾Œæ™¯åŒæ™‚æ¸…æ™°ï¼Œè¶…ç¾å¯¦æ„Ÿã€‚', prompt: 'split diopter shot, dual focus planes' },
                    { id: 'petzval', name: 'Petzval Art Lens ï½œ è—è¡“é¡', desc: 'ç‰¹æ®Šé¡é ­ï¼šæ—‹è½‰ç„¦å¤–ï¼Œè—è¡“ç¾å­¸ã€‚', prompt: 'Petzval art lens, swirly bokeh' },
                    { id: 'fisheye', name: 'Fisheye Lens ï½œ å»£åŸŸé­šçœ¼', desc: 'ç‰¹æ®Šé¡é ­ï¼š180åº¦ç•¸è®Šï¼Œä¸»é«”çªå‡ºã€‚', prompt: 'extreme fisheye distortion' },
                    { id: 'noct095', name: 'Noctilux f/0.95 ï½œ å¤œç¥', desc: 'ç‰¹æ®Šé¡é ­ï¼šæ¥µè–„æ·±ç„¦ï¼Œå¤¢å¹»æ°›åœã€‚', prompt: 'Noctilux f/0.95 lens, paper-thin DoF' },
                    { id: 'promist', name: 'Pro-Mist Filter ï½œ æŸ”å…‰', desc: 'ç‰¹æ®Šé¡é ­ï¼šé™ä½éŠ³åˆ©åº¦ï¼Œå¤¢å¹»æ„Ÿã€‚', prompt: '1/4 black pro-mist filter, highlight bloom' },
                    { id: 'lensbaby', name: 'Lensbaby Composer ï½œ å‰µæ„é¡', desc: 'ç‰¹æ®Šé¡é ­ï¼šæ‰‹å‹•ç„¦é»ï¼Œå‘¨åœæ‹‰ä¼¸æ¨¡ç³Šã€‚', prompt: 'Lensbaby Composer, selective focus' }
                ],
                focals: [
                    { id: 'none', name: 'None' },
                    { id: '6mm', name: '6mm' }, { id: '8mm', name: '8mm' },
                    { id: '12mm', name: '12mm' }, { id: '14mm', name: '14mm' },
                    { id: '18mm', name: '18mm' }, { id: '24mm', name: '24mm' },
                    { id: '35mm', name: '35mm' }, { id: '47mm', name: '47mm' },
                    { id: '50mm', name: '50mm' }, { id: '55mm', name: '55mm' },
                    { id: '85mm', name: '85mm' }, { id: '100mm', name: '100mm' },
                    { id: '200mm', name: '200mm' }, { id: '400mm', name: '400mm' },
                    { id: '600mm', name: '600mm' }, { id: '800mm', name: '800mm' },
                    { id: '1200mm', name: '1200mm' }, { id: '1700mm', name: '1700mm' },
                    { id: '5200mm', name: '5200mm' }
                ],
                apertures: [
                    { id: 'none', name: 'None' },
                    { id: 'ğ‘“/0.95', name: 'ğ‘“/0.95' }, { id: 'ğ‘“/1.2', name: 'ğ‘“/1.2' },
                    { id: 'ğ‘“/1.4', name: 'ğ‘“/1.4' }, { id: 'ğ‘“/1.8', name: 'ğ‘“/1.8' },
                    { id: 'ğ‘“/2.0', name: 'ğ‘“/2.0' }, { id: 'ğ‘“/2.8', name: 'ğ‘“/2.8' },
                    { id: 'ğ‘“/4.0', name: 'ğ‘“/4.0' }, { id: 'ğ‘“/5.6', name: 'ğ‘“/5.6' },
                    { id: 'ğ‘“/8.0', name: 'ğ‘“/8.0' }, { id: 'ğ‘“/11', name: 'ğ‘“/11' },
                    { id: 'ğ‘“/16', name: 'ğ‘“/16' }, { id: 'ğ‘“/22', name: 'ğ‘“/22' },
                    { id: 'ğ‘“/32', name: 'ğ‘“/32' }, { id: 'ğ‘“/45', name: 'ğ‘“/45' }
                ],
                shotTypes: [
                    { id: 'EWS', name: 'EWS' }, { id: 'WS', name: 'WS' },
                    { id: 'FS', name: 'Full Shot' }, { id: 'MLS', name: 'MLS' },
                    { id: 'Cowboy', name: 'Cowboy' }, { id: 'MS', name: 'MS' },
                    { id: 'MCU', name: 'MCU' }, { id: 'CU', name: 'CU' },
                    { id: 'ECU', name: 'ECU' }, { id: 'Macro', name: 'Macro' }
                ],
                perspectives: [
                    { id: 'eye', name: 'Eye-Level' }, { id: 'low', name: 'Low Angle' },
                    { id: 'high', name: 'High Angle' }, { id: 'overhead', name: 'Overhead' },
                    { id: 'worms', name: 'Wormâ€™s Eye' }, { id: 'dutch', name: 'Dutch Angle' },
                    { id: 'ots', name: 'OTS' }, { id: 'pov', name: 'POV' },
                    { id: 'selfie', name: 'Selfie Angle' }, { id: 'ground', name: 'Ground Level' }
                ],
                lighting: [
                    { id: 'none', name: 'None ï½œ ä¸æŒ‡å®š', desc: 'ä¸æŒ‡å®šç‡ˆå…‰åƒæ•¸ï¼Œä¿ç•™ç©ºç™½ã€‚', prompt: '' },
                    { id: 'threepoint', name: 'Three-Point Lighting ï½œ ä¸‰é»ç…§æ˜', desc: 'æ¨™æº–å•†æ”æ¶æ§‹ï¼Œå»ºç«‹ç«‹é«”æ„Ÿèˆ‡æ·±åº¦ã€‚', prompt: 'professional three-point lighting (key, fill, back)' },
                    { id: 'highkey', name: 'High-Key ï½œ é«˜æ˜èª¿', desc: 'æ˜äº®å°‘å½±ï¼Œé«˜ç«¯ç¾å¦é¢¨æ ¼ã€‚', prompt: 'high-key lighting, bright airy aesthetic, minimal shadows' },
                    { id: 'softbox', name: 'Softbox Lighting ï½œ æŸ”å…‰ç®±', desc: 'å‡å‹»æ¼«å°„ï¼Œå•†æ”æ¨™æº–æŸ”å…‰æ•ˆæœã€‚', prompt: 'softbox diffused lighting, smooth gradients' },
                    { id: 'specular', name: 'Specular ï½œ é¡é¢é«˜å…‰', desc: 'å®šç¾©é‡‘å±¬èˆ‡ç²¾å¯†ç‰©ä»¶è³ªæ„Ÿã€‚', prompt: 'intense specular highlights' },
                    { id: 'chiaroscuro', name: 'Chiaroscuro ï½œ æ˜æš—å°ç…§', desc: 'åŠ‡æ€§å…‰å½±ï¼Œæ¨¡ä»¿å¤å…¸ç•«ä½œã€‚', prompt: 'chiaroscuro lighting, dramatic contrast' },
                    { id: 'rembrandt', name: 'Rembrandt ï½œ æ—å¸ƒè˜­å…‰', desc: 'å°ˆæ¥­è‚–åƒï¼šæœ€å¼·å…‰å½±å±¤æ¬¡æ„Ÿã€‚', prompt: 'Rembrandt lighting, triangle cheek highlight, moody portrait' },
                    { id: 'butterfly', name: 'Butterfly Lighting ï½œ è´è¶å…‰', desc: 'æ™‚å°šç¾å¦æ¨™é…ï¼Œé¼»ä¸‹è¶å½±ã€‚', prompt: 'butterfly lighting, glamour shadow, fashion style' },
                    { id: 'lowkey', name: 'Low-Key ï½œ ä½æš—èª¿', desc: 'é‡é™°å½±ï¼Œç‡Ÿé€ ç¥ç¥•èˆ‡æˆ²åŠ‡æ„Ÿã€‚', prompt: 'low-key lighting, heavy shadows, high contrast drama' },
                    { id: 'split_lit', name: 'Split Lighting ï½œ å´å‘åˆ‡å…‰', desc: 'æˆ²åŠ‡æ„Ÿå¼·çƒˆå´å‘æ‰“å…‰ã€‚', prompt: 'split lighting setup, dramatic side light' },
                    { id: 'rimlight', name: 'Rim Light ï½œ è¼ªå»“å…‰', desc: 'å‹¾å‹’é‚Šç·£ï¼ŒæŠ½é›¢èƒŒæ™¯ã€‚', prompt: 'powerful rim lighting, glowing edges' },
                    { id: 'gobo', name: 'Gobo Projection ï½œ é®å…‰æŠ•å½±', desc: 'æŠ•å°„é™°å½±åœ–æ¡ˆã€‚', prompt: 'gobo lighting, shadow patterns' },
                    { id: 'slash', name: 'Slash Lighting ï½œ æ¢ç‹€å…‰', desc: 'çª„é•·ç¡¬å…‰ï¼Œå®šç¾©ç„¦é»ã€‚', prompt: 'slash lighting, strip of hard light' },
                    { id: 'negfill', name: 'Negative Fill ï½œ è² è£œå…‰', desc: 'å¼·åŒ–é™°å½±ï¼Œå¢åŠ åšåº¦ã€‚', prompt: 'negative fill, deep rich shadows' },
                    { id: 'silhouette', name: 'Silhouette ï½œ å‰ªå½±', desc: 'å¼·èƒŒå…‰ï¼Œç´”é»‘è¼ªå»“ã€‚', prompt: 'silhouette photography, strong backlight' },
                    { id: 'natural_ambient', name: 'Natural Ambient ï½œ è‡ªç„¶ç’°å¢ƒå…‰', desc: 'çœŸå¯¦ç‰©ç†åå°„ï¼Œè‡ªç„¶æŸ”å’Œå…‰æ„Ÿã€‚', prompt: 'natural environment ambient light, soft natural fill, realistic bounced light' },
                    { id: 'volumetric', name: 'Volumetric ï½œ é«”ç©å…‰', desc: 'ç’°å¢ƒå…‰ï¼šå…‰æŸè·¯å¾‘å¯è¦‹ï¼Œç©ºæ°£æ„Ÿå¼·ã€‚', prompt: 'volumetric lighting, visible light beams' },
                    { id: 'candle', name: 'Candlelight ï½œ ç‡­å…‰', desc: 'ç’°å¢ƒå…‰ï¼šæš–è‰²æº«ç‡Ÿé€ æ°›åœã€‚', prompt: '1800K candlelight, warm amber glow' },
                    { id: 'golden', name: 'Golden Hour ï½œ é»ƒé‡‘æ™‚åˆ»', desc: 'ç’°å¢ƒå…‰ï¼šæ—¥è½æš–é‡‘ã€‚', prompt: 'natural golden hour sun, warm glow, 3500K backlighting' },
                    { id: 'blue', name: 'Blue Hour ï½œ è—èª¿æ™‚åˆ»', desc: 'æ—¥è½å†·è—ã€‚', prompt: 'cold blue hour lighting, sapphire reflection' },
                    { id: 'neon', name: 'Neon Noir ï½œ éœ“è™¹é»‘è‰²', desc: 'é«˜å°æ¯”é…è‰²ï¼Œç§‘å¹»æœªä¾†æ„Ÿã€‚', prompt: 'neon noir lighting, cyan and magenta color cast' },
                    { id: 'tyndall', name: 'Tyndall Effect ï½œ ä¸é”çˆ¾', desc: 'ç¥è–å…‰æŸæ„Ÿï¼Œå¤§æ°£æ•£å°„ã€‚', prompt: 'Tyndall effect, divine god rays' }
                ],
                luts: [
                    { id: 'none', name: 'None ï½œ ä¸æŒ‡å®š', desc: 'ä¸æŒ‡å®šè‰²å½©é¢¨æ ¼ï¼Œä¿ç•™ç©ºç™½ã€‚', prompt: '' },
                    { id: 'correct', name: 'Color Accurate ï½œ è‰²å½©æº–ç¢º', desc: 'æ¨™æº–è‰²å½©ï¼šç²¾æº–é‚„åŸè‰²å½©ï¼Œä¸­æ€§åƒè€ƒã€‚', prompt: 'calibrated color accuracy, neutral reference profile' },
                    { id: 'commercial', name: 'Commercial ï½œ é ‚ç´šå•†æ”', desc: 'æ¨™æº–è‰²å½©ï¼šæ¨™æº–ç™½å¹³è¡¡ï¼Œé«˜ç«¯å•†æ¥­æ„Ÿã€‚', prompt: 'high-end commercial editorial color science, standard white balance' },
                    { id: 'provia', name: 'Fujifilm Provia 100F ï½œ æº–ç¢ºæ­£ç‰‡', desc: 'æ¨™æº–è‰²å½©ï¼šè‰²å½©é‚„åŸæœ€æº–çš„æ­£ç‰‡ã€‚', prompt: 'Fujifilm Provia 100F (RDPIII), accurate slide film colors' },
                    { id: 'reala', name: 'Fujifilm Reala 500D ï½œ è‡ªç„¶è†šè‰²', desc: 'æ¨™æº–è‰²å½©ï¼šå¯¬å®¹åº¦é«˜ï¼Œå‘ˆç¾è‡ªç„¶ã€‚', prompt: 'Fujifilm Reala 500D film stock, exceptional skin tones' },
                    { id: 'portra400', name: 'Kodak Portra 400 ï½œ æŸ¯é”', desc: 'å‰µæ„é¢¨æ ¼ï¼šäººåƒé¦–é¸ï¼Œæº«æ½¤ç´°è†©ã€‚', prompt: 'Kodak Portra 400 film stock emulation, natural skin tones' },
                    { id: 'cinestill800', name: 'CineStill 800T ï½œ è—èª¿', desc: 'å‰µæ„é¢¨æ ¼ï¼šå¤œæ™¯é¦–é¸ç´…è‰²å…‰æšˆã€‚', prompt: 'CineStill 800T, tungsten balanced, red halation highlights' },
                    { id: 'eterna', name: 'Fujifilm Eterna ï½œ å¯Œå£«é›»å½±', desc: 'å‰µæ„é¢¨æ ¼ï¼šä½åå·®æŸ”å’Œè³ªæ„Ÿã€‚', prompt: 'Fujifilm Eterna film stock, soft look' },
                    { id: 'velvia', name: 'Fujifilm Velvia 50 ï½œ å¯Œå£«', desc: 'å‰µæ„é¢¨æ ¼ï¼šé¢¨æ™¯é¦–é¸ï¼Œæ¥µé«˜é£½å’Œã€‚', prompt: 'Fujifilm Velvia 50, vivid landscape' },
                    { id: 'lomo', name: 'LOMO ï½œ æ´›è«é¢¨æ ¼', desc: 'å‰µæ„é¢¨æ ¼ï¼šé«˜é£½å’Œå¼·æš—è§’ï¼Œè† ç‰‡æ„Ÿã€‚', prompt: 'Lomography aesthetic, high saturation' },
                    { id: 'holga', name: 'Holga ï½œ è³€åŠ é¢¨æ ¼', desc: 'å‰µæ„é¢¨æ ¼ï¼šLo-Fi æ¼å…‰æ¨¡ç³Šã€‚', prompt: 'Holga photography style, lo-fi aesthetic' },
                    { id: 'sepia', name: 'Sepia Tone ï½œ æ‡·èˆŠè¤', desc: 'å–®è‰²èª¿ï¼šè€ç…§ç‰‡ç¾æ„Ÿã€‚', prompt: 'sepia tone vintage photograph' },
                    { id: 'cyanotype', name: 'Cyanotype ï½œ è—æ›¬', desc: 'å–®è‰²èª¿ï¼šæ·±è—å·¥ç¨‹åœ–è³ªæ„Ÿã€‚', prompt: 'cyanotype alternative process' },
                    { id: 'infrared', name: 'Rollei Infared 400 ï½œ ç´…å¤–ç·š', desc: 'å–®è‰²èª¿ï¼šéç¾å¯¦å…‰è­œè¶…è„«æ„Ÿã€‚', prompt: 'infrared photography, Rollei look' },
                    { id: 'hp5', name: 'Ilford HP5 Plus ï½œ ç¶“å…¸é»‘ç™½', desc: 'é»‘ç™½ï¼šç´€å¯¦æ„Ÿå¼·ã€‚', prompt: 'Ilford HP5 Plus black and white film' },
                    { id: 'tmax', name: 'Kodak T-MAX ï½œ ç´€éŒ„é»‘ç™½', desc: 'é»‘ç™½ï¼šç´°è†©ç°éšå±¤æ¬¡ã€‚', prompt: 'Kodak T-MAX 400 film' }
                ],
                aspectRatios: ['1:1', '9:16', '16:9', '3:4', '4:3', '3:2', '2:3', '5:4', '4:5', '21:9']
            };

            const STORAGE_KEY = 'cine_v12_5_drag';
            const [shots, setShots] = useState(() => JSON.parse(localStorage.getItem(STORAGE_KEY + '_list') || '[]'));
            const [current, setCurrent] = useState(() => JSON.parse(localStorage.getItem(STORAGE_KEY + '_cfg') || JSON.stringify({
                action: '', camera: 'phaseone', focal: '35mm', aperture: 'none', lens: 'otus55', 
                perspective: 'eye', shotType: 'MCU', lighting: 'threepoint', lut: 'correct', aspect: '16:9',
                refPerson: false, refProduct: false, refEnv: false
            })));
            const [copyId, setCopyId] = useState(null);
            const dragItemIndex = useRef();
            const dragOverItemIndex = useRef();

            useEffect(() => localStorage.setItem(STORAGE_KEY + '_list', JSON.stringify(shots)), [shots]);
            useEffect(() => localStorage.setItem(STORAGE_KEY + '_cfg', JSON.stringify(current)), [current]);

            const analyzeSubjectBoost = (text) => {
                if (!text) return "";
                const t = text.toLowerCase();
                let boosters = [];
                if (/(man|woman|girl|boy|face|eyes|skin|model|subject|hand|body|character|person|child|old)/i.test(t)) {
                    boosters.push("highly realistic skin textures and pores, natural skin subsurface scattering, detailed iris reflections, lifelike hair detail, masterful studio portrait lighting");
                }
                if (/(apple|fruit|bottle|product|glass|liquid|watch|jewelry|car|metal|object|gadget|iphone|phone|watch)/i.test(t)) {
                    boosters.push("ultra-high fidelity surface textures, authentic optical light refraction, caustic reflections on material, premium commercial product photography");
                }
                return boosters.length > 0 ? boosters.join(", ") : "high-fidelity photographic detail, organic textures";
            };

            const finalPrompt = useMemo(() => {
                if (!current.action) return "æŠŠä½ å¿ƒä¸­æ‰€æƒ³çš„å¯«å‡ºä¾†...ï¼ˆRAW 24-BIT å¼•æ“å·²å°±ç·’ï¼‰";
                const findP = (cat, id) => {
                    if (id === 'none') return '';
                    const item = config[cat].find(i => i.id === id);
                    if (!item) return '';
                    if (cat === 'focals') return `focal length ${id}`;
                    if (cat === 'apertures') return `aperture ${id.replace('ğ‘“/', 'f/')}`; // è¼¸å‡ºä¿æŒæ¨™æº–æ ¼å¼
                    return item.prompt || item.name;
                };

                const refBoosterStrings = [];
                let refIndex = 1;
                if (current.refPerson) { refBoosterStrings.push(`maintaining facial features and character identity from reference image ${refIndex}`); refIndex++; }
                if (current.refProduct) { refBoosterStrings.push(`preserving exact structural details and material characteristics of the product from reference image ${refIndex}`); refIndex++; }
                if (current.refEnv) { refBoosterStrings.push(`adopting the environmental atmosphere and lighting layout from reference image ${refIndex}`); refIndex++; }

                const techChain = [
                    findP('shotTypes', current.shotType),
                    findP('perspectives', current.perspective),
                    current.action,
                    ...refBoosterStrings,
                    findP('cameras', current.camera),
                    findP('lenses', current.lens),
                    findP('lighting', current.lighting),
                    findP('focals', current.focal),
                    findP('apertures', current.aperture),
                    findP('luts', current.lut)
                ].filter(val => val && val.trim() !== '');

                const boost = analyzeSubjectBoost(current.action);
                const photographicQuality = "award-winning professional photography, ultra-realistic, 8K resolution, 24-Bit RAW Depth, raw format, optical excellence, sharp focus, intricate organic textures, masterful composition, cinematic lighting, depth of field";
                const aspect = `--ar ${current.aspect.replace(':', ':')}`;
                
                return `${techChain.join(", ")}, ${boost}, ${photographicQuality} ${aspect}`;
            }, [current]);

            const addShot = () => { if (current.action) { setShots([...shots, { ...current, id: Date.now(), prompt: finalPrompt }]); setCurrent({ ...current, action: '', refPerson: false, refProduct: false, refEnv: false }); } };

            const handleCopy = (text, id) => {
                const el = document.createElement('textarea');
                el.value = text; el.style.position = 'fixed'; el.style.left = '-9999px';
                document.body.appendChild(el); el.select();
                try { document.execCommand('copy'); setCopyId(id); setTimeout(() => setCopyId(null), 2000); } catch (e) {}
                document.body.removeChild(el);
            };

            const handleReset = () => {
                if (window.confirm("ç¢ºå®šè¦é‡ç½®æŠ€è¡“åƒæ•¸ï¼ˆå«åƒè€ƒåœ–å‹¾é¸ï¼‰è‡³ None å—ï¼Ÿ")) {
                    setCurrent(prev => ({
                        ...prev,
                        camera: 'none', focal: 'none', aperture: 'none', lens: 'none', lut: 'none', lighting: 'none',
                        refPerson: false, refProduct: false, refEnv: false
                    }));
                }
            };

            const handleClear = () => { if (window.confirm("ç¢ºå®šè¦æ¸…é™¤æ‰€æœ‰åˆ†é¡ç´€éŒ„å—ï¼Ÿ")) setShots([]); };

            // --- æ’åºé‚è¼¯ ---
            const handleSort = () => {
                const newShots = [...shots];
                const draggedItemContent = newShots.splice(dragItemIndex.current, 1)[0];
                newShots.splice(dragOverItemIndex.current, 0, draggedItemContent);
                dragItemIndex.current = null;
                dragOverItemIndex.current = null;
                setShots(newShots);
            };

            return (
                <div className="min-h-screen bg-[#070708] text-gray-200 font-sans p-2 md:p-6 pb-20">
                    <div className="max-w-screen-2xl mx-auto grid grid-cols-1 xl:grid-cols-12 gap-4 md:gap-6">
                        
                        <div className="xl:col-span-5 space-y-4">
                            <header className="flex items-center justify-between px-2 pt-2">
                                <div className="flex items-center gap-3">
                                    <div className="bg-blue-600 p-2 rounded-xl shadow-lg"><Icon name="Smartphone" size={20} className="text-white" /></div>
                                    <div>
                                        <h1 className="text-lg font-black tracking-tighter text-white uppercase leading-none">CinePrompt Master</h1>
                                        <p className="text-[9px] text-gray-500 uppercase tracking-widest font-bold mt-1">V12.5 | DRAG & SORT EDITION</p>
                                    </div>
                                </div>
                                <div className="flex items-center gap-1.5 text-[8px] text-green-400 bg-green-400/5 px-2 py-1 rounded-full border border-green-400/20 font-bold"><Icon name="Brain" size={10} /> RAW 24-BIT OPTIC ENGINE</div>
                            </header>

                            <div className="bg-[#121214] border border-gray-800 rounded-3xl p-4 md:p-6 shadow-2xl space-y-5">
                                <div className="space-y-1.5">
                                    <label className="mobile-label text-[10px] font-black text-gray-500 uppercase flex items-center gap-2 tracking-widest"><Icon name="ChevronRight" className="text-blue-500" size={14} /> Visual Beat ç•«é¢æè¿°</label>
                                    <textarea value={current.action} onChange={(e) => setCurrent({...current, action: e.target.value})} placeholder="ä¾‹å¦‚ï¼šä¸€ä½ç©¿è‘—è¥¿è£çš„ç”·å£«ï¼Œåœ¨é›¨å¾Œçš„æ±äº¬è¡—é ­è¡Œèµ°..." className="w-full bg-[#18181b] border border-gray-800 rounded-2xl p-4 text-sm focus:ring-1 focus:ring-blue-500 outline-none h-28 transition-all resize-none" />
                                </div>

                                <div className="bg-[#18181b] border border-gray-800/50 rounded-2xl p-4 space-y-3 shadow-inner">
                                    <label className="mobile-label text-[10px] font-black text-blue-400 uppercase flex items-center gap-2 tracking-widest mb-1"><Icon name="Layers" size={12} /> Ref Booster åƒè€ƒåœ–å¢å¼· (Banana å°ˆç”¨)</label>
                                    <div className="flex flex-wrap gap-6">
                                        {['refPerson', 'refProduct', 'refEnv'].map((key, i) => (
                                            <label key={key} className="flex items-center gap-2 cursor-pointer group">
                                                <input type="checkbox" checked={current[key]} onChange={(e) => setCurrent({...current, [key]: e.target.checked})} className="rounded bg-gray-900 border-gray-700" />
                                                <span className="text-[12px] font-bold text-gray-400 group-hover:text-blue-400 transition-colors">{['äººç‰©åƒè€ƒ','ç”¢å“åƒè€ƒ','ç’°å¢ƒåƒè€ƒ'][i]}</span>
                                            </label>
                                        ))}
                                    </div>
                                    <p className="text-[9px] text-gray-600 italic">ç³»çµ±å°‡æ ¹æ“šå‹¾é¸é †åºè‡ªå‹•åˆ†é… Ref Image ç·¨è™Ÿã€‚</p>
                                </div>

                                <div className="space-y-5">
                                    <div className="grid grid-cols-3 gap-3">
                                        <div className="space-y-1.5">
                                            <label className="mobile-label text-[10px] font-black text-gray-400 uppercase flex items-center gap-1 tracking-wider"><Icon name="Camera" size={10}/> æ”å½±æ©Ÿ</label>
                                            <select value={current.camera} onChange={(e) => setCurrent({...current, camera: e.target.value})} className="w-full bg-[#1c1c1e] border border-gray-800 rounded-xl h-11 px-3 outline-none cursor-pointer">
                                                {config.cameras.map(c => <option key={c.id} value={c.id} title={c.desc}>{c.name}</option>)}
                                            </select>
                                        </div>
                                        <div className="space-y-1.5">
                                            <label className="mobile-label text-[10px] font-black text-gray-400 uppercase flex items-center gap-1 tracking-wider"><Icon name="Focus" size={10}/> ç„¦è·</label>
                                            <select value={current.focal} onChange={(e) => setCurrent({...current, focal: e.target.value})} className="w-full bg-[#1c1c1e] border border-gray-800 rounded-xl h-11 px-3 outline-none cursor-pointer">
                                                {config.focals.map(f => <option key={f.id} value={f.id}>{f.name}</option>)}
                                            </select>
                                        </div>
                                        <div className="space-y-1.5">
                                            <label className="mobile-label text-[10px] font-black text-gray-400 uppercase flex items-center gap-1 tracking-wider"><Icon name="Zap" size={10}/> å…‰åœˆ</label>
                                            <select value={current.aperture} onChange={(e) => setCurrent({...current, aperture: e.target.value})} className="w-full bg-[#1c1c1e] border border-gray-800 rounded-xl h-11 px-3 outline-none cursor-pointer font-serif italic">
                                                {config.apertures.map(a => <option key={a.id} value={a.id}>{a.name}</option>)}
                                            </select>
                                        </div>
                                    </div>

                                    <div className="grid grid-cols-2 gap-3">
                                        <div className="space-y-1.5">
                                            <label className="mobile-label text-[10px] font-black text-gray-400 uppercase flex items-center gap-1 tracking-wider"><Icon name="Maximize" size={10}/> é¡é ­ç³»åˆ—</label>
                                            <select value={current.lens} onChange={(e) => setCurrent({...current, lens: e.target.value})} className="w-full bg-[#1c1c1e] border border-gray-800 rounded-xl h-11 px-3 outline-none cursor-pointer">
                                                {config.lenses.map(l => <option key={l.id} value={l.id} title={l.desc}>{l.name} ï½œ {l.desc.split('ï¼š')[0]}</option>)}
                                            </select>
                                        </div>
                                        <div className="space-y-1.5">
                                            <label className="mobile-label text-[10px] font-black text-gray-400 uppercase flex items-center gap-1 tracking-wider"><Icon name="Palette" size={10}/> è‰²å½© Lut</label>
                                            <select value={current.lut} onChange={(e) => setCurrent({...current, lut: e.target.value})} className="w-full bg-[#1c1c1e] border border-gray-800 rounded-xl h-11 px-3 outline-none cursor-pointer">
                                                {config.luts.map(u => <option key={u.id} value={u.id} title={u.desc}>{u.name} ï½œ {u.desc.split('ï¼š')[0]}</option>)}
                                            </select>
                                        </div>
                                    </div>

                                    <div className="grid grid-cols-2 gap-3">
                                        <div className="space-y-1.5">
                                            <label className="mobile-label text-[10px] font-black text-gray-400 uppercase flex items-center gap-1 tracking-wider"><Icon name="Eye" size={10}/> æ™¯åˆ¥</label>
                                            <select value={current.shotType} onChange={(e) => setCurrent({...current, shotType: e.target.value})} className="w-full bg-[#1c1c1e] border border-gray-800 rounded-xl h-11 px-3 outline-none cursor-pointer">{config.shotTypes.map(s => <option key={s.id} value={s.id}>{s.name}</option>)}</select>
                                        </div>
                                        <div className="space-y-1.5">
                                            <label className="mobile-label text-[10px] font-black text-gray-400 uppercase flex items-center gap-1 tracking-wider"><Icon name="Layers" size={10}/> æ‹æ”è¦–è§’</label>
                                            <select value={current.perspective} onChange={(e) => setCurrent({...current, perspective: e.target.value})} className="w-full bg-[#1c1c1e] border border-gray-800 rounded-xl h-11 px-3 outline-none cursor-pointer">{config.perspectives.map(p => <option key={p.id} value={p.id}>{p.name}</option>)}</select>
                                        </div>
                                    </div>

                                    <div className="grid grid-cols-2 gap-3">
                                        <div className="space-y-1.5">
                                            <label className="mobile-label text-[10px] font-black text-yellow-500 uppercase flex items-center gap-1 tracking-wider"><Icon name="Sun" size={10}/> ç‡ˆå…‰è¨­å®š</label>
                                            <select value={current.lighting} onChange={(e) => setCurrent({...current, lighting: e.target.value})} className="w-full bg-[#1c1c1e] border border-yellow-900/20 rounded-xl h-11 px-3 outline-none text-yellow-500/80 cursor-pointer">
                                                {config.lighting.map(l => <option key={l.id} value={l.id} title={l.desc}>{l.name} ï½œ {l.desc.split('ï¼š')[0]}</option>)}
                                            </select>
                                        </div>
                                        <div className="space-y-1.5">
                                            <label className="mobile-label text-[10px] font-black text-gray-400 uppercase flex items-center gap-1 tracking-wider"><Icon name="Monitor" size={10}/> è¼¸å‡ºæ¯”ä¾‹</label>
                                            <select value={current.aspect} onChange={(e) => setCurrent({...current, aspect: e.target.value})} className="w-full bg-[#1c1c1e] border border-gray-800 rounded-xl h-11 px-3 outline-none cursor-pointer">{config.aspectRatios.map(r => <option key={r} value={r}>{r}</option>)}</select>
                                        </div>
                                    </div>
                                </div>

                                <button onClick={addShot} disabled={!current.action} className="w-full py-4 rounded-2xl font-black text-xs uppercase tracking-widest transition-all shadow-lg active:scale-95 bg-blue-600 hover:bg-blue-500 text-white shadow-blue-900/30 disabled:bg-gray-800 disabled:text-gray-600 disabled:cursor-not-allowed">Add Shot to Timeline</button>
                            </div>

                            <div className="bg-[#121214] border border-blue-900/20 rounded-3xl p-4 relative overflow-hidden group italic">
                                <div className="absolute top-0 left-0 w-1 h-full bg-blue-600 group-hover:w-2 transition-all"></div>
                                <div className="flex justify-between items-center mb-2">
                                    <label className="text-[9px] font-black text-blue-500 uppercase tracking-widest flex items-center gap-2"><Icon name="Brain" size={10}/> Live Master Prompt</label>
                                    <button onClick={() => handleCopy(finalPrompt, 'live')} className="text-[9px] bg-blue-600/10 text-blue-400 px-3 py-1 rounded-full hover:bg-blue-600/20 font-bold border border-blue-600/20 transition-all active:scale-90">{copyId === 'live' ? 'COPIED!' : 'COPY'}</button>
                                </div>
                                <div className="font-mono text-[10px] leading-relaxed text-gray-500 max-h-[140px] overflow-y-auto custom-scrollbar">{finalPrompt}</div>
                            </div>
                        </div>

                        {/* å³å´åˆ†é¡åˆ—è¡¨ */}
                        <div className="xl:col-span-7 flex flex-col gap-4">
                            <div className="flex justify-between items-center px-1">
                                <h2 className="text-xs font-black text-gray-500 uppercase tracking-widest flex items-center gap-2"><Icon name="Film" size={16} /> Shot List Timeline</h2>
                                <div className="flex gap-4">
                                    <button onClick={handleReset} className="text-[10px] font-bold text-gray-500 hover:text-white flex items-center gap-1 transition-colors"><Icon name="RotateCcw" size={14}/> RESET</button>
                                    <button onClick={handleClear} className="text-[10px] font-bold text-red-500/80 hover:text-red-500 flex items-center gap-1 transition-colors"><Icon name="Trash2" size={14}/> CLEAR</button>
                                    <button onClick={() => { let csv = "Shot#,Action,Specs,Prompt\n"; shots.forEach((s, i) => csv += `${i+1},"${s.action}","${s.camera}|${s.focal}","${s.prompt}"\n`); const blob = new Blob([csv], { type: 'text/csv' }); const url = URL.createObjectURL(blob); const link = document.createElement("a"); link.href = url; link.download = `Ian_Production_ShotList.csv`; link.click(); }} className="text-[10px] font-bold text-blue-500 hover:text-blue-400 flex items-center gap-1 transition-colors"><Icon name="Download" size={14}/> EXPORT</button>
                                </div>
                            </div>
                            <div className="bg-[#121214] border border-gray-800 rounded-3xl flex-1 overflow-hidden shadow-inner flex flex-col">
                                <div className="overflow-y-auto max-h-[750px] custom-scrollbar">
                                    <table className="w-full text-left text-xs">
                                        <thead className="bg-[#18181b] text-[9px] text-gray-500 uppercase font-black border-b border-gray-800 sticky top-0 z-10">
                                            <tr>
                                                <th className="px-2 py-4 w-10 text-center">â‡…</th>
                                                <th className="px-5 py-4 w-12 text-center">#</th>
                                                <th className="px-5 py-4">Visual Narrative</th>
                                                <th className="px-5 py-4 w-44 text-right">Action</th>
                                            </tr>
                                        </thead>
                                        <tbody className="divide-y divide-gray-800/50">
                                            {shots.length === 0 ? (<tr><td colSpan="4" className="px-5 py-40 text-center text-gray-600 font-medium italic">å°šæœªå»ºç«‹åˆ†é¡ï¼Œè«‹åœ¨å·¦å´è¼¸å…¥æè¿°...</td></tr>) : (
                                                shots.map((s, idx) => (
                                                    <tr 
                                                        key={s.id} 
                                                        draggable 
                                                        onDragStart={() => (dragItemIndex.current = idx)}
                                                        onDragEnter={() => (dragOverItemIndex.current = idx)}
                                                        onDragEnd={handleSort}
                                                        onDragOver={(e) => e.preventDefault()}
                                                        className="hover:bg-blue-600/5 transition-colors group"
                                                    >
                                                        <td className="px-2 py-6 text-center align-middle">
                                                            <div className="drag-handle"><Icon name="Menu" size={16} /></div>
                                                        </td>
                                                        <td className="px-5 py-6 text-gray-600 font-bold text-center align-middle">{idx + 1}</td>
                                                        <td className="px-5 py-6">
                                                            <div className="font-black text-gray-100 mb-1.5 leading-tight text-sm">{s.action}</div>
                                                            <div className="flex flex-wrap gap-1.5 mb-2">
                                                                <span className="text-[8px] bg-blue-900/20 text-blue-400 px-1.5 py-0.5 rounded-lg border border-blue-900/30 font-bold uppercase">{s.shotType}</span>
                                                                <span className="text-[8px] bg-gray-800 text-gray-400 px-1.5 py-0.5 rounded-lg font-bold uppercase">{s.focal}</span>
                                                                <span className="text-[8px] bg-yellow-900/20 text-yellow-500 px-1.5 py-0.5 rounded-lg border border-yellow-900/30 font-bold uppercase font-serif italic">{s.aperture}</span>
                                                                <span className="text-[8px] bg-white/5 text-gray-500 px-1.5 py-0.5 rounded-lg border border-white/10 font-bold uppercase">{s.aspect}</span>
                                                            </div>
                                                            <div className="text-[10px] text-blue-500/60 font-mono line-clamp-2 italic">{s.prompt}</div>
                                                        </td>
                                                        <td className="px-5 py-6 text-right align-middle">
                                                            <div className="flex justify-end gap-3 opacity-60 group-hover:opacity-100 transition-opacity">
                                                                <button onClick={() => handleCopy(s.prompt, s.id)} className={`p-2.5 rounded-xl transition-all active:scale-90 ${copyId === s.id ? 'bg-green-600 text-white' : 'bg-gray-800 text-gray-400 hover:text-white hover:bg-blue-600'}`}>{copyId === s.id ? <Icon name="CheckCircle2" size={16} /> : <Icon name="Copy" size={16} />}</button>
                                                                <button onClick={() => setShots(shots.filter(i => i.id !== s.id))} className="p-2.5 rounded-xl bg-gray-800 text-gray-400 hover:text-white hover:bg-red-600 transition-all active:scale-90"><Icon name="Trash2" size={16} /></button>
                                                            </div>
                                                        </td>
                                                    </tr>
                                                ))
                                            )}
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                            <footer className="text-[9px] text-gray-700 flex justify-between items-center px-2 font-black mt-2">
                                <div>RAW PHOTOGRAPHIC CORE | 24-BIT RAW DEPTH ACTIVE</div>
                                <div>Â© 2026 CINEPROMPT MASTER WORKSTATION</div>
                            </footer>
                        </div>
                    </div>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
